/*!!
 * asys.js (C)nabe@abk
 * https://github.com/nabe-abk/asys.js
 *
 * This module need jQuery.
 */
"use strict";/*!! asys.js */
window.$secure=function(t){var e=$(document).find('[id="'+t.substr(1)+'"]');return e.length>1?(console.error('$secure() error! : id="'+t+'" is duplicate.'),$([])):e},String.prototype.chop=function(){return this.slice(0,-1)},$.fn.showDelay=function(){let t=Array.from(arguments);return t.unshift($$.DefaultShowSpeed),$.fn.show.apply(this,t)},$.fn.hideDelay=function(){let t=Array.from(arguments);return t.unshift($$.DefaultShowSpeed),$.fn.hide.apply(this,t)},$.fn.toggleDelay=function(){let t=Array.from(arguments);return t.unshift($$.DefaultShowSpeed),$.fn.toggle.apply(this,t)},$.fn.findx=function(){return $.fn.filter.apply(this,arguments).add($.fn.find.apply(this,arguments))},$.fn.rootfind=function(t){return this.parents().last().find(t)},$.fn.parentsOne=function(t){return this.parents(t).first()},$.fn.existsData=function(t){return void 0!==this.data(t)},$.fn.parseFormHash=function(t){return this._parseForm(!1,t)},$.fn.parseFormFD=function(t){return this._parseForm(!0,t)},$.fn._parseForm=function(t,e){const n=t?new FormData:{},a=e instanceof $||void 0===e?e:$(e);return this.find("input, select, textarea").each((function(e,i){if(i.disabled)return;if("checkbox"==i.type&&!i.checked)return;if(a&&a.find(i).length)return;const o=i.name;if("INPUT"!=i.tagName||"file"!=i.type)null!=o&&""!=o&&(t?n.append(o,$(i).val()):n[o]=$(i).val());else{if(!t)return;const e=i.files;for(let t=0;t<e.length;t++)n.append(o,e[t])}})),n},$.fn.anySerialize=function(){return this.find("input, textarea, select").serialize()},$.fn.anySerializeArray=function(){return this.find("input, textarea, select").serializeArray()},$.fn.onSequence=function(t,e,n){const a="_on_"+t.replace(/[^\w]/g,"_");return this.each((function(i,o){const s=$(o);if(!s.data(a)){const e=[];s.data(a,e),s.on(t,(function(){for(var t in e){if(!e[t].func.apply(this,arguments))return!1}return!0}))}const r=s.data(a);r.push({priority:e,func:n}),s.data(a,r.sort((function(t,e){return t.priority-e.priority})))})),this},$.fn.triggerWithOE=function(t,e){const n=jQuery.Event(t,{originalEvent:e}),a=Array.from(arguments);a.unshift(n),$.fn.trigger.apply(this,a)},$.fn.dndEmulation=function(t){function e(t,e,n){const a=$.Event(t);return a.altKey=e.altKey,a.metaKey=e.metaKey,a.ctrlKey=e.ctrlKey,a.shiftKey=e.shiftKey,a.clientX=n.clientX,a.clientY=n.clientY,a.screenX=n.screenX,a.screenY=n.screenY,a.pageX=n.pageX,a.pageY=n.pageY,a.which=1,a}function n(t){for(var e=[];t&&(e.push(t),t!=self);)t=t.parentNode;return e}t||(t={}),this.each((function(a,i){!function(a){let i,o,s,r;a.addEventListener("touchstart",(function(t){i=t.target,r=t.touches[0];const n=e("mousedown",t,t.touches[0]);$(i).trigger(n),o=!1,s=setTimeout((function(){s=!1,o=!0}),$$.TouchDnDTime)}),{passive:!0}),a.addEventListener("touchend",(function(t){s&&clearTimeout(s),s=!1;const n=e("mouseup",t,t.changedTouches[0]);$(t.target).trigger(n)})),a.addEventListener("touchmove",(function(a){if(!o)return s&&clearTimeout(s),void(s=!1);const r=a.changedTouches[0],c=document.elementFromPoint(r.clientX,r.clientY),l=n(c),d=e("mousemove",a,r);if($(l).trigger(d),a.cancelable&&a.preventDefault(),!t.leave||c==i)return;const u=n(i);for(;u.length&&l.length&&u[u.length-1]==l[l.length-1];)u.pop(),l.pop();const f=e("mouseleave",a,r),p=e("mouseout",a,r),h=e("mouseenter",a,r),g=e("mouseover",a,r);$(u).trigger(f),$(i).trigger(p),$(l).trigger(h),$(c).trigger(g),i=c}),{passive:!1})}(i)}))},$.event.special.mydbltap={setup:function(){let t,e;this.addEventListener("click",(function(n){if(t){if(t=!1,e)return;return $(n.target).trigger("mydbltap")}t=!0,e=!0,setTimeout((function(){t=!1}),$$.DoubleTapTime)}),{passive:!0}),this.addEventListener("touchstart",(function(){e=!1}),{passive:!0})}},window.PrefixStorage=function(t){this.ls=localStorage,this.prefix=String(t)+"::"},PrefixStorage.prototype.set=function(t,e){this.ls[this.prefix+t]=e},PrefixStorage.prototype.get=function(t){return this.ls[this.prefix+t]},PrefixStorage.prototype.getInt=function(t){const e=this.ls[this.prefix+t];return null==e?0:Number(e)},PrefixStorage.prototype.defined=function(t){return void 0!==this.ls[this.prefix+t]},PrefixStorage.prototype.remove=function(t){this.ls.removeItem(this.prefix+t)},PrefixStorage.prototype.allclear=function(){this.ls.clear()},PrefixStorage.prototype.clear=function(t){const e=this.ls,n=this.prefix,a=n.length,i=[];for(let t=0;t<e.length;t++){const o=e.key(t);o.substr(0,a)===n&&i.push(o)}for(var o in i)delete e[i[o]]},$.fn.adiaryDialog=function(t={}){const e=this;if("open"===t)return this.adiaryDialogOpen();if("close"===t)return this.adiaryDialogClose();$(window);const n=$("<dialog>").addClass("ui-dialog").attr("tabindex",-1),a=t.minWidth||200,i=t.minHeight||150;let o=t.width||300;o<0&&(o="auto"),n.css({width:o,minWidth:a,minHeight:i}),t.maxWidth&&n.css("max-width",t.maxWidth),t.maxHeight&&n.css("max-height",t.maxHeight),t.dialogClass&&n.addClass(t.dialogClass);const s=this.adiaryUIData("dialog",{...t});s.$dialog=n,s.min_h=i;const r=$("<div>").addClass("ui-dialog-titlebar ui-widget-header"),c=$("<span>").addClass("ui-dialog-title").html(t.title||this.attr("title")||"&ensp;");if(r.append(c),n.append(r),t.noExit)n.on("cancel",(function(t){return!1}));else{const a=$("<button>").addClass("ui-button").attr({title:"Close",tabindex:-1});a.append($("<span>").addClass("ui-icon ui-icon-closethick")),r.append(a),a.on("click",(function(){t.exit&&t.exit(),e.adiaryDialogClose()})),n.on("keydown",(function(t){"Escape"==t.key&&a.click()}))}if(s.$header=r,s.$restore=this.parent(),s.display=this.css("display"),this.addClass("ui-dialog-content"),n.append(this),this.show(),t.buttons){const e=$("<div>").addClass("ui-dialog-buttonpane"),a=$("<div>").addClass("ui-dialog-buttonset"),i=t.buttons,o=[];for(let t in i){let e=$("<button>").addClass("ui-button").attr("type","button").text(t);e.on("click",i[t]),a.append(e),o.push(e)}e.append(a),n.append(e),s.$footer=e}return t&&!t.autoOpen&&"autoOpen"in t?this:this.adiaryDialogOpen()},$.fn.adiaryDialogOpen=function(){const t=this.adiaryUIData("dialog"),e=t.$dialog;if(!e)throw"Do not open dialog!";t.modal?e.adiaryShowModal():($("body").append(e),e[0].show(),e.focus());const n=$(window),a=t.$header.outerHeight()+(t.$footer?t.$footer.outerHeight():0);this.css("min-height",t.min_h-a+"px"),this.css("max-height",n.height()-a+"px");const i=n.scrollLeft()+(n.width()-e.outerWidth())/2,o=n.scrollTop()+(n.height()-e.outerHeight())/2;return e.css({left:i,top:o}),e.adiaryDraggable({handle:".ui-dialog-titlebar"}),t.open&&t.open(null,this),this},$.fn.adiaryDialogClose=function(){const t=this.adiaryUIData("dialog"),e=t.$dialog;if(!e)throw"Do not close dialog!";return t.beforeClose&&t.beforeClose.call(null,this),t.modal?e.adiaryCloseModal():(e[0].close(),e.detach()),t.$dialog=null,t.$restore&&t.$restore.length&&(this.css("display",t.display),t.$restore.append(this)),t.close&&t.close.call(null,this),this},$.adiaryShowOverlay=function(){const t=$("<dialog>").addClass("ui-overlay").attr("tabindex",-1);return t.adiaryShowModal(),t.close=function(){return this.adiaryCloseModal(),this},t},$.fn.adiaryShowModal=function(){const t=this.adiaryUIData("modal-inert",[]);return $("body").children().each(((e,n)=>{n.inert||(t.push(n),n.inert=!0)})),this.attr("popover","manual"),$("body").append(this),this[0].showPopover(),this.focus(),this},$.fn.adiaryCloseModal=function(){const t=this.adiaryUIData("modal-inert");for(const e of t)e.inert=!1;this[0].close(),this.detach()},$.fn.adiaryProgressbar=function(t){const e=this.adiaryUIData("progress");if("value"===t)return e.value;let n;t.change&&(e.change=t.change),t.complete&&(e.complete=t.complete),"$value"in e||(this.find(".ui-progressbar-value").remove(),e.$value=$("<div>").addClass("ui-progressbar-value"),this.addClass("ui-progressbar"),this.append(e.$value),n=!0);const a=e.value,i=t.value;return e.value=i,e.$value.css("width",i+"%"),(n||e.change&&a!=i)&&e.change(e.value),e.complete&&100<=i&&e.complete(e.value),this},$.fn.adiaryAccordion=function(t){const e=this.children("h1,h2,h3,h4,h5,h6");e.click((function(t){const e=$(t.target).next("div");e.length&&e.toggleDelay()})),e.next("div").hide()},$.fn.adiaryDraggable=function(t){let e,n,a;function i(t){const i=e+t.pageX,o=n+t.pageY;a.css({position:"absolute",left:i+"px",top:o+"px"}),t.preventDefault()}this.addClass("aui-draggable"),this.on("mousedown",(function(o){$("iframe").css("pointer-events","none");const s=$(o.target);if(a=s.hasClass("aui-draggable")?s:s.parentsOne(".aui-draggable"),t){const e=s;if(s!=a&&e.add(s.parentsUntil(".aui-draggable")),t.cancel&&e.filter(t.cancel).length)return;if(t.handle&&!e.filter(t.handle).length)return}const r=a.offset();e=r.left-o.pageX,n=r.top-o.pageY,document.addEventListener("mousemove",i),o.preventDefault()})),this.on("mouseup",(function(t){$("iframe").css("pointer-events","auto"),document.removeEventListener("mousemove",i),t.preventDefault()}))},$.fn.adiaryUIData=function(t,e){t="aui_"+t,2==arguments.length&&(this[t]=e);return this[t]||={}},$.adiaryUIFilterExists=function(t,e){const n=[],a=$("body");for(let i in t)a.find(t[i]).length&&(n.push(t[i]),e&&e(t[i]));return n};let $$={name:"asys",Initialize:!0,DefaultShowSpeed:300,TouchDnDTime:100,DoubleTapTime:400,PopupDelayTime:300,PopupOffsetX:15,PopupOffsetY:10};!function(){const t=[];let e;$$.init=function(n,a){if(n)return e&&(a&&console.warn("init() initialized, but priority set",a),n.call(this)),t.push({func:n,p:a||100});t.sort((function(t,e){return t.p-e.p}));for(var i=0;i<t.length;i++)t[i].func.call(this);e=!0}}(),$$.msg=function(t,e){if(!this.msgs){this.msgs=this.msgs||{};this.load_msg&&this.load_msg()}const n=this.msgs[t];return void 0===n?e||t.toUpperCase():n},$$.set_msg=function(t,e){const n=this.msgs=this.msgs||{};if("object"!=typeof t)return void(n[t]=e);const a=Object.keys(t);for(let e=0;e<a.length;e++)n[a[e]]=t[a[e]]},$$.load_msg=function(t){t in jQuery||(t=$(t));const e=this.msgs=this.msgs||{};t.each((function(t,n){try{const t=$(n).html().replace(/^[\s\S]*?{/,"{").replace(/}[\s\S]*?$/,"}"),i=JSON.parse(t);for(var a in i)e[a]=i[a]}catch(t){console.error(t)}}))},$$.dialog=function(t,e={}){if(!e.callback){const n=this;return new Promise(((a,i)=>{n.dialog(t,{...e,callback:a})}))}const n=e.ok||this.msg("ok"),a={};a[n]=function(){t.adiaryDialog("close"),e.callback&&e.callback("FORM"!==t.prop("tagName")||t.parseFormHash())},e.cancelBtn&&(a[e.cancel||this.msg("cancel")]=function(){t.adiaryDialog("close"),e.callback&&e.callback(!1)});const i=function(t){return 13!==t.which||(a[n](),!1)};t.on("keypress","input",i),t.adiaryDialog({noExit:e.noExit,modal:!0,title:e.title,dialogClass:e.class,buttons:a,open:function(){const n=t.siblings(".ui-dialog-buttonpane");"ok"===e.focus&&n.find("button:eq(0)").focus(),"cancel"===e.focus&&n.find("button:eq(1)").focus()},exit:function(){e.callback&&e.callback(!1)},beforeClose:function(){t.off("keypress","input",i)},minWidth:e.minWidth||t.data("min-width"),minHeight:e.minHeight||t.data("min-height"),width:e.width||t.data("width")})},$$.dialog_base=function(t,e,n,a){let i;return a||"function"!=typeof n||(a=n,n=null),e instanceof $?i=e:(e instanceof Object&&(t={...t,...e},e=e.html),e&&"#"===e.substr(0,1)?i=$secure(e):(i=$("<div>"),n&&(e=(e=e.replace(/%([A-Za-z])/g,(function(t,e){return n[e]}))).replace(/%[A-Za-z]/g,"")),i.html(e))),t.title||=i&&i.data("title")||this.msg("confirm"),a&&(t.callback=a),this.dialog(i,t)},$$.show_dialog=function(t,e,n,a={}){return this.dialog_base(a,t,e,n)},$$.show_error=function(t,e,n,a){return this.dialog_base({class:"error-dialog",title:this.msg("error"),...a},t,e,n)},$$.confirm=function(t,e,n,a){return this.dialog_base({cancelBtn:!0,title:this.msg("confirm"),...a},t,e,n)},$$.form_dialog=function(t,e,n){let a;if(e instanceof $)a=e;else{a=$("<form>"),Array.isArray(e)||(e=[e]);for(const t of e){if("string"==typeof t){a.append($("<div>").html(t));continue}if("p"==t.type){a.append($("<p>").html(t.html));continue}if("textarea"==t.type){const e=$("<textarea>").attr({rows:t.rows||5,name:t.name}).addClass("w100p");""!=t.val&&e.text(t.val),a.append(e);continue}if("*"==t.type){a.append(t.html);continue}const e=$("<div>");"before"in t&&e.append(t.before),e.append($("<input>").attr({type:t.type||"text",name:t.name,value:t.value}).addClass(t.class||"w80p")),t.iclass&&e.addClass(t.iclass),"after"in t&&e.append(t.after),a.append(e)}}return this.dialog(a,{title:t,callback:n})},$$.send_ajax=function(t){const e=this;if(!t.success&&!t.error_dialog_callback)return new Promise(((n,a)=>{e.send_ajax({...t,success:n,error_dialog_callback:a})}));function n(n,a){if(t.error&&!t.error(n,a))return;let i="";if(a){if(a.msg&&(i+="<p>"+e.tag_esc(a.msg.toString())+"</p>"),a.errs){const t=[],n=a.errs,o=n._order||Object.keys(n);for(let a in o)""!=n[o[a]]&&t.push(e.tag_esc(n[o[a]]));i+='<p class="ni">'+t.join("<br>")+"</p>"}a._debug&&(i+='<p class="ni">'+a._debug.replace(/\n/g,"<br>")+"</p>")}else i="<p>"+e.msg("server_response_error","response data error!")+"</p>";e.show_error(i,(function(){t.error_dialog_callback&&t.error_dialog_callback(n,a)}))}const a=t.data;return $.ajax(t.url||e.myself||"./",{method:"POST",data:"[object Object]"===a.toString()?$.param(a):a,processData:!1,contentType:!1,dataType:"json",error:n,success:function(e){return"0"!=e.ret?n("ret!=0",e):e._debug?n("_debug",e):void(t.success&&t.success(e))},complete:t.complete})},$$.popup=function(t){const e=this,n=$(t.target);let a=n.data("delay")||this.PopupDelayTime;if(a<1&&(a=1),!t.data.$div){const e=$("<div>").addClass("popup-block");this.$body.append(e),t.data.$div=e}n.on("mouseleave",t.data,(function(t){e.popup_hide(t)})),n.data("timer",setTimeout((function(){e.popup_show(t)}),a))},$$.popup_show=function(t){const e=$(t.target),n=t.data.$div;n.is(":animated")||(t.data.show&&t.data.show(t,e,n),n.css("left",this.SP?0:t.pageX+this.PopupOffsetX),n.css("top",t.pageY+this.PopupOffsetY),n.showDelay())},$$.popup_hide=function(t){const e=$(t.target),n=t.data.$div;e.data("timer")&&(clearTimeout(e.data("timer")),e.data("timer",null)),e.off("mouseout"),n.hide(),t.data.hide&&t.data.hide(t,e,n)},$$.init((function(){const t=this;this.$body.on("mouseover",".help[data-help]",{show:function(e,n,a){const i=t.tag_esc_br(n.data("help"));a.addClass("popup popup-help"),a.html(i)}},(function(e){t.popup(e)}))})),$$.init((function(){this.$body.on("click","button[data-href]",(function(t){location.href=$(t.target).data("href")}))})),$$.init((function(){this.$body.on("click","button.js-set-value[data-target]",(function(t){const e=$(t.target);$(e.data("target")).val(e.attr("value"))}))})),$$.init((function(){this.$body.on("keypress","input.no-enter-submit, form.no-enter-submit input",(function(t){return 13!==t.which}))})),$$.init((function(){this.$body.on("click","button.js-file-btn",(function(t){const e=$(t.target),n=$(e.data("target"));n.length&&(n.data("target")&&!n.data("--regist-change-evt")&&(n.data("--regist-change-evt",!0),n.on("change",(function(t){const e=n.rootfind(n.data("target")),a=n.val().replace(/^.*?([^\\\/]*)$/,"$1");e.text(a)}))),n.click())}))})),$$.init((function(){this.$body.on("click","button.js-reset-btn",(function(t){const e=$(t.target),n=$(e.data("target"));n.length&&""!=n.val()&&n.val("").change()}))})),$$.init((function(){this.$body.on("change","input.js-checked",(function(t){const e=$(t.target),n=e.data("target");$(n).prop("checked",e.is(":checked"))}))})),$$.init((function(){this.$body.on("change",".js-on-change-submit",(function(t){$(t.target).parentsOne("form").trigger("submit")}))})),$$.init((function(){this.$body.on("click","tbody.js-line-checked",(function(t){const e=$(t.target),n=e.parents("tr");if(n.add(e).filter("a,input,button,label,.line-checked-cancel").length)return;n.last().find('input[type="checkbox"],input[type="radio"]').first().click()}))})),$$.js_combo_dummy_val="eeeee\n\n",$$.set_value_on_select=function(t,e){if(t.val(e),t.val()!=e){const n=(t.data("format")||"%v").replace(/%v/g,e),a=$("<option>").attr("value",e).text(n);t.append(a),t.val(e)}t.change()},$$.init((function(){const t=this,e=this.js_combo_dummy_val;async function n(n){const a=$(n.target),i=a.val();if(i!==e)return a.data("current",i);const o=a.data("current");a.val(o);const s={name:"data",value:o,class:a.data("class")},r=(a.data("format")||"").match(/^(.*)%v(.*)$/);r&&(s.before=r[1],s.after=r[2]);const c=await t.form_dialog(a.data("title"),s);if(c){const e=c.data;if(""==e||a.val()==e)return;t.set_value_on_select(a,e),a.data("current",e)}}this.$body.on("focus","select.js-combo",(function(a){const i=$(a.target);if(i.data("current",i.val()),i.find('option[value="'+e+'"]').length)return;const o=$("<option>").attr("value",e).text(t.msg("other"));i.append(o),i.on("change",n)}))})),$$.init((function(){this.$body.on("click","table.js-sortablex thead",(function(t){const e=$(t.target).filter("th,td"),n=e.length?e:$(t.target).parentsOne("th,td");if(n.hasClass("disable-sort"))return;let a=0,i=n;for(;i.length;)i=i.prev(),a++;const o=n.parentsOne("table").children("tbody"),s="td:nth-child("+a+")",r=o.data("_sortable_prev_cnt")==a;o.data("_sortable_prev_cnt",r?-1:a),o.each((function(t,e){const n=$(e);let a=!0;const i=[];n.children("tr").each((function(t,e){const n=$(e),o=n.children(s),r=o.existsData("sort")?o.data("sort"):o.text().replace(/^\s+/,"").replace(/\s+$/,""),c=Number(r);isNaN(c)&&(a=!1),i.push({val:r,num:c,$tr:n})})),a?i.sort((function(t,e){return t.num-e.num})):i.sort((function(t,e){return t.val===e.val?0:t.val<e.val})),r&&i.reverse(),n.empty();for(let t in i)n.append(i[t].$tr)}))}))})),function(){const t=[];let e;$$.dom_init=function(n,a){if("function"==typeof n)return e&&(a&&console.warn("dom_init() initialized, but priority set",a),n.call(this,this.$body)),t.push({func:n,p:a||100});t.sort((function(t,e){return t.p-e.p}));const i=n||this.$body;for(var o=0;o<t.length;o++)t[o].func.call(this,i);e=!0},$$.init($$.dom_init)}(),$$.dom_init((function(t){const e=this;t.findx("button.js-check-form").on("click",(function(t){const e=$(t.target),n=e.parents("form.js-check-form");n.length&&(n.data("confirm",e.data("confirm")),n.data("focus",e.data("focus")),n.data("button",e))})),t.findx("form.js-check-form").onSequence("submit",10,(function(t){const n=$(t.target),a=n.data("target");let i=0;if(a&&(i=n.rootfind(a+":checked").length,!i))return!1;let o=n.data("confirm");return!o||(n.data("--js-check-form-ok")?(n.data("--js-check-form-ok",!1),!0):(e.dialog_base({title:e.msg("confirm"),focus:n.data("focus"),cancelBtn:!0},o,{c:i},(function(e){if(e){if(n.data("--js-check-form-ok",!0),n.data("button"))return n.data("button").click();n.triggerWithOE(t.originalEvent)}})),!1))}))})),$$.dom_init((function(t){const e=this;t.find("form.js-ajax").onSequence("submit",100,(function(t){const n=$(t.target),a=function(){!function(t,n){n.find(".error").removeClass("error");const a=n.data("generator");let i=a?a(n,t):new FormData(n[0]);const o=t.originalEvent&&t.originalEvent.submitter;if(o&&"BUTTON"===o.tagName&&""!==o.name&&i.append(o.name,o.value),a||n.find('input[type="file"]').length||(i=new URLSearchParams(i)),!n.data("reentry")){if(n.data("--js-ajax-stop"))return;n.data("--js-ajax-stop",!0),n.prop("disabled",!0)}const s=n.data("overlay")&&$.adiaryShowOverlay(),r=n.data("start"),c=n.data("complete");"function"==typeof r&&r(n),e.send_ajax({url:n.attr("action"),data:i,success:function(t){s&&s.close();const a=n.data("success"),i=n.data("url");return"function"==typeof a?a(t):"string"==typeof a&&""!=a?e.show_dialog(a,(function(){i&&(location=i)})):void(i&&(location=i))},error:function(t,e){s&&s.close();const a=n.data("error");if("function"==typeof a)return a(e);if(!e||!e.errs)return!0;const i=e.errs;for(let t in i){if("_order"==t)continue;const e=t.match(/^(.*)#(\d+)$/),a=e?e[2]:void 0;t=e?e[1]:t;try{let e=n.find('[name="'+t+'"], [data-name="'+t+'"]');a&&(e=$(e[a-1])),e.addClass("error")}catch(i){console.error(i)}}return!0},error_dialog_callback:function(){const t=n.data("error_dialog_callback");if("function"==typeof t)return t()},complete:function(t){"function"==typeof c&&c(n),n.data("--js-ajax-stop")&&(n.data("--js-ajax-stop",!1),n.prop("disabled",!1))}})}(t,n)},i=n.data("checker");return!("function"==typeof i&&!i(n,a))&&(a(),!1)}))})),$$.dom_init((function(t){const e=this;t.findx("input.js-save, select.js-save").each((function(t,n){const a=$(n),i=a[0].type;let o="radio"!=i&&a.attr("id");if(o||(o="name="+a.attr("name")),!o)return;if("checkbox"==i)return a.change((function(t){const n=$(t.target);e.Storage.set(o,n.prop("checked")?1:0)})),void(e.Storage.defined(o)&&a.prop("checked",0!=e.Storage.get(o)));if("radio"==i){const t=a.attr("value");return a.change((function(n){$(n.target);e.Storage.set(o,t)})),void(e.Storage.defined(o)&&t==e.Storage.get(o)&&a.prop("checked",1))}a.change((function(t){const n=$(t.target);n.val()!=e.js_combo_dummy_val&&e.Storage.set(o,n.val())}));const s=e.Storage.get(o);return s?"SELECT"==n.tagName?e.set_value_on_select(a,s):a.val(s):void 0}))})),$$.dom_init((function(t){const e=t.findx("input.js-enable, input.js-disable, select.js-enable, select.js-disable");let n;e.change((function(t){const e=$(t.target),a=e.rootfind(e.data("target")),i=e[0].type;if("radio"==i){if(e.prop("disabled")||!e.prop("checked"))return;let t=e.data("state");return e.hasClass("js-enable")&&(t=!t),void a.prop("disabled",t)}let o;if("checkbox"==i)o=!e.prop("disabled")&&e.prop("checked");else if("number"==i||"int"==e.data("type")){var s=e.val();o=s.length&&s>0}else o=!(e.val()+"").match(/^\s*$/);if(!n&&e.data("_flag")===o)return;e.data("_flag",o);const r=e.hasClass("js-disable")?"_disable_c":"_enable_c",c=o?1:n?0:-1;a.each((function(t,n){const a=$(n);a.data(r,(a.data(r)||0)+c);const i=(a.data("_disable_c")||0)-(a.data("_enable_c")||0)+(e.hasClass("js-enable")?.1:0);a.prop("disabled",i>0)}))})),n=!0,e.change(),n=!1})),function(){function t(t,e){if("A"==t[0].tagName)return!0;if(e&&"INPUT"!=t[0].tagName&&"BUTTON"!=t[0].tagName){const e=$("<span>");e.addClass("ui-icon switch-icon"),t.prepend(e).addClass("sw-show")}const n="INPUT"==t[0].tagName&&t[0].type;let a=t.data("target");if(!a){if(!(t=t.parentsOne(".js-switch")).length)return;a=t.data("target")}const i=$(a);if(!i.length)return!1;const o=t.existsData("save")?this.Storage:null,s=t.attr("id")||t.attr("name")||a;let r;e&&o&&o.defined(s)?(r=!!o.getInt(s),"checkbox"!=n&&"radio"!=n||t.prop("checked",r)):r="checkbox"==n||"radio"==n?t.prop("checked"):!(!e||"show"!=t.data("default"))||(!e||"hide"!=t.data("default"))&&(e?!i.is(":hidden"):i.is(":hidden")),t.data("negative")&&(r=!r);let c=t.data("delay");if(void 0!==c&&""!==c||(c=this.DefaultShowSpeed),t.data("fast")){const t="--css--"+s.replace(/[^\w\-]/g,"-");let e=$("#"+t);return e.length||(e=$("<style>").attr("id",t),$("head").append(e)),e.text(r?"":a+"{ display: none; }"),!0}if(r?(t.addClass("sw-show"),t.removeClass("sw-hide"),e?i.show():i.show(c),o&&o.set(s,"1")):(t.addClass("sw-hide"),t.removeClass("sw-show"),e?i.hide():i.hide(c),o&&o.set(s,"0")),"button"==n){const e=r?t.data("show-val"):t.data("hide-val");null!=e&&t.val(e)}return!0}$$.dom_init((function(e){const n=this,a=function(e){const a=$(e.target);if("radio"!=a[0].type)return t.call(n,a);const i=a.attr("name");$('input.js-switch[name="'+i+'"]').each((function(e,a){t.call(n,$(a))}))};e.findx(".js-switch").each((function(e,i){const o=$(i);t.call(n,o,!0)&&o.on("INPUT"==i.tagName?"change":"click",a)}))}))}(),$$.dom_init((function(t){const e=t.findx(".js-accordion");e.length&&e.adiaryAccordion()})),$$.dom_init((function(t){t.findx("select.js-multiple").each((function(t,e){const n=$(e);if(n.prop("multiple"))return;const a=n.clone(!0).prop("multiple",!0).removeClass("js-multiple").css("display","none");n.data("__multi",a),n.removeAttr("id"),n.removeAttr("name"),a.find("option.js-multiple-ignore").remove(),a.insertAfter(n);const i=a.find("option");i.each((function(t,e){const n=$(e);n.prop("selected",n.data("selected"))}));const o=function(t){const e=[];if(i.each((function(t,n){const a=$(n);a.prop("selected")&&e.push(a.html())})),e.length){const t=$("<option>").addClass("js-multple-selected").html(e[0]+(e[1]?"...":""));n.find(".js-multple-selected").remove(),n.append(t.prop("selected",!0))}};o(),a.on("change",o)}))})),$$.init((function(){this.$body.on("mousedown keydown","select.js-multiple",(function(t){const e=$(t.currentTarget),n=e.data("__multi")||e,a=n.data("label-class"),i=n.data("custom-dialog"),o=i?$(i):$("<div>").data("title",n.data("title")),s={};return n.find("option").each((function(t,e){const n=$(e);if(n.hasClass("js-multiple-ignore"))return;const r=n.val();if(s[r]=n,i)return;const c=$("<label>").html(n.html());""!==a&&void 0!==a&&c.addClass(a),c.prepend($("<input>").attr({type:"checkbox",value:r}).prop("checked",n.prop("selected"))).addClass(n.data("label-class")),o.append(c)})),msys.show_dialog(o,(function(t){if(!t)return;let e;o.find("input").each((function(t,n){const a=$(n),i=a.val(),o=s[i],r=a.prop("checked");!a.hasClass("js-multiple-ignore")&&o&&(r!=o.prop("selected")&&(e=!0),o.prop("selected",r))})),e&&n.change()})),t.preventDefault(),!1}))})),function(){const t={};$$.load_script=function(e,n){const a=t[e];if(a){if(!n)return;return 1==a?n():void a.on("load",func)}const i=$(document.createElement("script"));t[e]=i,i.attr("src",e),i.attr("async","async"),n&&i.on("load",(function(a){t[e]=1,n(a)})),this.$head[0].appendChild(i[0])}}(),$$.tag_esc=function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},$$.tag_esc_br=function(t){return this.tag_esc(t).replace(/\n|\\n/g,"<br>")},$$.tag_esc_amp=function(t){return this.tag_esc(t.replace(/&/g,"&amp;"))},$$.tag_decode=function(t){return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#92;/g,"\\")},$$.tag_decode_amp=function(t){return this.tag_decode(t).replace(/&amp;/g,"&")},$$.insert_to_textarea=function(t,e){var n=t.selectionStart;t.value=t.value.substring(0,n)+e+t.value.substring(n),n+=e.length,t.setSelectionRange(n,n)},$$.set_cookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+"; SameSite=Lax;"},$$.get_cookie=function(t){const e=document.cookie.split(/; */);for(var n=0;n<e.length;n++){var a=e[n].split("=",2);if(t==decodeURIComponent(a[0]))return decodeURIComponent(a[1])}},$$.size_format=function(t){function e(t){const e=(t=t.toString()).indexOf("."),n=0<=e&&e<3?4:3;return t.substr(0,n)}return t>104857600?(t=(t=Math.round(t/1048576)).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))+" MB":t>1023487?e(t/1048576)+" MB":t>999?e(t/1024)+" KB":t+" Byte"},$$.int=function(t){const e=parseInt(t);return isNaN(e)?0:e},$$.float=function(t){const e=parseFloat(t);return isNaN(e)?0:e},$$.init((function(){function t(t){$(t).each((function(t,e){const n=e.outerHTML.match(/^(.*?)>/),a=document.createElement("script");a.innerHTML=(n?"// "+n[1]+">\n":"")+e.innerHTML,e.innerHTML="",e.appendChild(a)}))}$("link.css-defer").attr("rel","stylesheet"),t('script-const, script[type="js-const"]'),$((function(){t('script-defer, script[type="js-defer"]')}))})),$((function(){(function(){this.$head=$("head"),this.$body=$("body");const t=$secure("#asys-vars");if(t.length){const n=t.html().replace(/^[\s\S]*?{/,"{").replace(/}[\s\S]*?$/,"}"),a=JSON.parse(n),i=["name","Initialize","myself","myself2","Basepath"];for(var e=0;e<i.length;e++)i[e]in a&&(this[i[e]]=a[i[e]]);this.asys_vars=a}this.load_msg($secure("#asys-msgs")),this.Storage=new PrefixStorage(this.myself||"/"),window[this.name]=this,!1!==this.Initialize&&this.init()}).call($$)}));
//# sourceMappingURL=asys.min.js.map