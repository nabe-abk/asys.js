{"version":3,"names":["window","$secure","id","obj","$","document","find","substr","length","console","error","String","prototype","chop","this","slice","fn","showDelay","args","Array","from","arguments","unshift","$$","DefaultShowSpeed","show","apply","hideDelay","hide","toggleDelay","toggle","findx","filter","add","rootfind","sel","parents","last","parentsOne","first","existsData","name","undefined","data","parseFormHash","cancel","_parseForm","parseFormFD","fdmode","FormData","$cancel","each","idx","dom","disabled","type","checked","tagName","append","val","files","i","anySerialize","serialize","anySerializeArray","serializeArray","onSequence","_event","_priority","_func","replace","self","list","on","x","func","push","priority","sort","a","b","triggerWithOE","oe","e","jQuery","Event","originalEvent","arg","trigger","dndEmulation","opt","make_mouse_event","evt","touch","altKey","metaKey","ctrlKey","shiftKey","clientX","clientY","screenX","screenY","pageX","pageY","which","get_par_elements","ary","parentNode","prev","flag","timer","orig_touch","addEventListener","target","touches","setTimeout","TouchDnDTime","passive","clearTimeout","changedTouches","elementFromPoint","enter","cancelable","preventDefault","leave","pop","e_leave","e_out","e_enter","e_over","regist_dnd_emulation","event","special","mydbltap","setup","mouse","DoubleTapTime","PrefixStorage","path","ls","localStorage","prefix","set","key","get","getInt","v","Number","defined","remove","removeItem","allclear","clear","pf","len","k","adiaryDialog","adiaryDialogOpen","adiaryDialogClose","$dialog","addClass","attr","min_w","minWidth","min_h","minHeight","width","css","maxWidth","maxHeight","dialogClass","adiaryUIData","$title","$span","html","title","noExit","$close","tabindex","exit","click","$header","$restore","parent","display","buttons","$footer","$btnset","btns","$btns","$btn","text","autoOpen","modal","adiaryShowModal","focus","$win","hf","outerHeight","height","scrollLeft","outerWidth","y","scrollTop","left","top","adiaryDraggable","handle","open","beforeClose","call","adiaryCloseModal","close","detach","adiaryShowOverlay","$overlay","inert","children","showPopover","adiaryProgressbar","value","init","change","complete","$value","old","adiaryAccordion","$objs","$div","next","sx","sy","$obj","move","position","$tar","hasClass","$o","parentsUntil","p","offset","removeEventListener","adiaryUIFilterExists","callback","$ary","$body","Initialize","PopupDelayTime","PopupOffsetX","PopupOffsetY","initialized","warn","msg","_default","msgs","load_msg","toUpperCase","set_msg","keys","Object","json","JSON","parse","dialog","Promise","resolve","reject","ok","btn","prop","cancelBtn","keyfunc","class","$bp","siblings","off","dialog_base","marg","w","m1","show_dialog","show_error","confirm","form_dialog","ele","$form","isArray","$ta","rows","$item","before","iclass","after","send_ajax","success","error_dialog_callback","ajax_error","err","h","tag_esc","toString","errs","o","_order","join","_debug","ajax","url","myself","method","param","processData","contentType","dataType","ret","popup","delay","$popup","popup_hide","popup_show","is","SP","tag_esc_br","location","href","file","$pars","js_combo_dummy_val","set_value_on_select","$select","$opt","dummy","async","change_select","_val","element","ma","match","$o1","cnt","$x","$tbody","td_nth","reverse","isNum","lines","i2","tr","$tr","$td","num","isNaN","empty","dom_init","$R","count","c","submit","removeClass","gen","sb","submitter","URLSearchParams","start_func","comp_func","submit_func","checker","Storage","counter","diff","prepend","tar","$target","storage","css_id","$css","$accordion","$sel","$multi","clone","removeAttr","insertAfter","$opts","__change","$add","$_obj","currentTarget","lclass","cdialog","val2opt","$label","msys","$inp","inc","load_script","$s","createElement","$head","appendChild","tag_esc_amp","tag_decode","tag_decode_amp","insert_to_textarea","ta","start","selectionStart","substring","setSelectionRange","set_cookie","cookie","encodeURIComponent","get_cookie","split","decodeURIComponent","size_format","s","sprintf_3f","n","indexOf","Math","round","int","parseInt","float","parseFloat","run_script","tag","outerHTML","scr","innerHTML","$vars","asys_vars"],"sources":["00_start.js","10_global-ext.js","11_jquery-ext.js","20_PrefixStorage.js","21_adiary-ui.js","30_init.js","40_dialog.js","41_ajax.js","42_popup.js","50_dom.js","60_dom-special.js","70_subroutines.js","80_defer.js","99_run_init.js"],"sourcesContent":["/*!!\n * asys.js (C)nabe@abk\n * https://github.com/nabe-abk/asys.js\n *\n * This module need jQuery.\n */\n'use strict';\n","/*!! asys.js */\n////////////////////////////////////////////////////////////////////////////////\n// get secure object\n////////////////////////////////////////////////////////////////////////////////\nwindow.$secure = function(id) {\n\tvar obj = $(document).find('[id=\"' + id.substr(1) + '\"]');\n\tif (obj.length >1) {\n\t\tconsole.error('$secure() error! : id=\"' + id + '\" is duplicate.');\n\t\treturn $([]);\n\t}\n\treturn obj;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// String\n////////////////////////////////////////////////////////////////////////////////\nString.prototype.chop = function() {\n\treturn this.slice(0,-1);\n}\n","//##############################################################################\n//extend jQuery\n//##############################################################################\n////////////////////////////////////////////////////////////////////////////////\n// show, hide with delay\n////////////////////////////////////////////////////////////////////////////////\n$.fn.showDelay = function(){\n\tlet args = Array.from(arguments)\n\targs.unshift($$.DefaultShowSpeed);\n\treturn $.fn.show.apply(this, args);\n}\n$.fn.hideDelay = function(){\n\tlet args = Array.from(arguments);\n\targs.unshift($$.DefaultShowSpeed);\n\treturn $.fn.hide.apply(this, args);\n}\n$.fn.toggleDelay = function(){\n\tlet args = Array.from(arguments);\n\targs.unshift($$.DefaultShowSpeed);\n\treturn $.fn.toggle.apply(this, args);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// find dom element including itself\n////////////////////////////////////////////////////////////////////////////////\n$.fn.findx = function() {\n\treturn $.fn.filter.apply(this, arguments).add( $.fn.find.apply(this, arguments) );\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// extra find function\n////////////////////////////////////////////////////////////////////////////////\n$.fn.rootfind = function(sel) {\n\treturn this.parents().last().find(sel);\n}\n$.fn.parentsOne = function(filter) {\n\treturn this.parents(filter).first();\n}\n$.fn.existsData = function(name) {\n\tconst v = this.data(name);\n\treturn v !== undefined;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// parse form to hash\n////////////////////////////////////////////////////////////////////////////////\n$.fn.parseFormHash = function(cancel) {\n\treturn this._parseForm(false, cancel);\n}\n$.fn.parseFormFD = function(cancel) {\n\treturn this._parseForm(true,  cancel);\n}\n$.fn._parseForm = function(fdmode, cancel) {\n\tconst data = fdmode ? new FormData : {};\n\tconst $cancel = (cancel instanceof $) ? cancel\n\t\t: (cancel === undefined ? cancel : $(cancel));\n\n\tthis.find('input, select, textarea').each(function(idx, dom){\n\t\tif (dom.disabled) return;\n\t\tif (dom.type == 'checkbox' && !dom.checked) return;\n\t\tif ($cancel && $cancel.find(dom).length) return;\n\n\t\tconst name = dom.name;\n\n\t\t// file\n\t\tif (dom.tagName == 'INPUT' && dom.type == 'file') {\n\t\t\tif (!fdmode) return;\n\t\t\tconst files = dom.files;\n\t\t\tfor(let i=0; i<files.length; i++)\n\t\t\t\tdata.append(name, files[i]);\n\t\t\treturn;\n\t\t}\n\t\tif (name == undefined || name == '') return;\n\t\tif (fdmode)\n\t\t\tdata.append(name, $(dom).val());\n\t\telse\n\t\t\tdata[name] = $(dom).val();\n\t});\n\treturn data;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// any serialize\n////////////////////////////////////////////////////////////////////////////////\n$.fn.anySerialize = function(){\n\treturn this.find('input, textarea, select').serialize();\n}\n$.fn.anySerializeArray = function(){\n\treturn this.find('input, textarea, select').serializeArray();\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Function calls sequentially when an event occurs\n////////////////////////////////////////////////////////////////////////////////\n$.fn.onSequence = function(_event, _priority, _func) {\n\tconst name = '_on_' + _event.replace(/[^\\w]/g, '_');\n\n\tthis.each(function(idx, dom) {\n\t\tconst self = $(dom);\n\n\t\tif (!self.data(name)) {\n\t\t\tconst list = [];\n\t\t\tself.data(name, list);\n\n\t\t\tself.on(_event, function(){\n\t\t\t\tfor(var x in list) {\n\t\t\t\t\tvar r = list[x].func.apply(this, arguments);\n\t\t\t\t\tif (!r) return false;\t// false break\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t})\n\t\t}\n\t\tconst list = self.data(name);\n\t\tlist.push({\n\t\t\tpriority:\t_priority,\n\t\t\tfunc:\t\t_func\n\t\t});\n\t\tself.data(name, list.sort(function(a,b){\n\t\t\treturn a.priority - b.priority\n\t\t}));\n\t});\n\treturn this;\n}\n\n$.fn.triggerWithOE = function(name, oe) {\n\tconst e   = jQuery.Event(name, { originalEvent: oe });\n\tconst arg = Array.from(arguments);\n\targ.unshift(e);\n\t$.fn.trigger.apply(this, arg);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Drag and Drop emulation by touch event\n////////////////////////////////////////////////////////////////////////////////\n$.fn.dndEmulation = function(opt){\n\tif (!opt) opt={};\n\n\t// make mouse event object from touch event infomation\n\tfunction make_mouse_event(name, evt, touch) {\n\t\tconst e    = $.Event(name);\n\t\te.altKey   = evt.altKey;\n\t\te.metaKey  = evt.metaKey;\n\t\te.ctrlKey  = evt.ctrlKey;\n\t\te.shiftKey = evt.shiftKey;\n\t\te.clientX  = touch.clientX;\n\t\te.clientY  = touch.clientY;\n\t\te.screenX  = touch.screenX;\n\t\te.screenY  = touch.screenY;\n\t\te.pageX    = touch.pageX;\n\t\te.pageY    = touch.pageY;\n\t\te.which    = 1;\n\t\treturn e;\n\t}\n\n\t// get all parents element including yourself.\n\tfunction get_par_elements(dom) {\n\t\tvar ary  = [];\n\t\twhile(dom) {\n\t\t\tary.push( dom );\n\t\t\tif (dom == self) break;\n\t\t\tdom = dom.parentNode;\n\t\t}\n\t\treturn ary;\n\t}\n\n\tfunction regist_dnd_emulation(dom) {\n\t\tlet prev;\n\t\tlet flag;\n\t\tlet timer;\n\t\tlet orig_touch;\n\n\t\t// mousedown\n\t\tdom.addEventListener('touchstart', function(evt) {\n\t\t\tprev = evt.target;\n\t\t\torig_touch = evt.touches[0];\n\t\t\tconst e = make_mouse_event('mousedown', evt, evt.touches[0]);\n\t\t\t$( prev ).trigger(e);\n\n\t\t\t// Disable the process if it does not pass a certain amount of time.\n\t\t\tflag  = false;\n\t\t\ttimer = setTimeout(function(){\n\t\t\t\ttimer = false;\n\t\t\t\tflag  = true;\n\t\t\t}, $$.TouchDnDTime)\n\t\t}, { passive: true });\n\n\t\t// mouseup\n\t\tdom.addEventListener('touchend', function(evt){\n\t\t\tif (timer) clearTimeout(timer);\n\t\t\ttimer = false;\n\t\t\tconst e = make_mouse_event('mouseup', evt, evt.changedTouches[0]);\n\t\t\t$( evt.target ).trigger(e);\n\t\t});\n\n\t\t// drag\n\t\tdom.addEventListener('touchmove', function(evt) {\n\t\t\t// move wait\n\t\t\tif (!flag) {\n\t\t\t\tif (timer) clearTimeout(timer);\n\t\t\t\ttimer = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst touch = evt.changedTouches[0];\n\t\t\tconst dom   = document.elementFromPoint(touch.clientX, touch.clientY);\n\t\t\tconst enter = get_par_elements(dom);\n\n\t\t\tconst e = make_mouse_event('mousemove', evt, touch);\n\t\t\t$(enter).trigger(e);\n\n\t\t\tif (evt.cancelable) evt.preventDefault();\n\t\t\tif (!opt.leave || dom == prev) return;\n\n\t\t\t////////////////////////////////////////////////////////\n\t\t\t// leave and enter event emulation\n\t\t\t////////////////////////////////////////////////////////\n\t\t\tconst leave = get_par_elements(prev);\n\n\t\t\t// Remove common elements\n\t\t\twhile(leave.length && enter.length\n\t\t\t   && leave[leave.length -1] == enter[enter.length -1]) {\n\t\t\t\tleave.pop();\n\t\t\t\tenter.pop();\n\t\t\t}\n\n\t\t\tconst e_leave = make_mouse_event('mouseleave', evt, touch);\n\t\t\tconst e_out   = make_mouse_event('mouseout',   evt, touch);\n\t\t\tconst e_enter = make_mouse_event('mouseenter', evt, touch);\n\t\t\tconst e_over  = make_mouse_event('mouseover',  evt, touch);\n\t\t\t$(leave).trigger( e_leave );\n\t\t\t$(prev) .trigger( e_out   );\n\t\t\t$(enter).trigger( e_enter );\n\t\t\t$(dom)  .trigger( e_over  );\n\n\t\t\t// save current dom\n\t\t\tprev=dom;\n\t\t}, {passive: false});\n\t}\n\n\tthis.each( function(idx, dom){\n\t\tregist_dnd_emulation(dom)\n\t});\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// \"dbltap\" event exclusive mouse\n////////////////////////////////////////////////////////////////////////////////\n// Double touch event order: touchstart, click, touchstart, click\n// Mouse double click order: click, click, dblclick\n$.event.special.mydbltap = {\n\tsetup: function(){\n\t\tlet flag;\n\t\tlet mouse;\n\t\tthis.addEventListener('click', function(evt) {\n\t\t\tif (flag) {\n\t\t\t\tflag = false;\n\t\t\t\tif (mouse) return;\n\t\t\t\treturn $(evt.target).trigger('mydbltap');\n\t\t\t}\n\t\t\tflag  = true;\n\t\t\tmouse = true;\n\t\t\tsetTimeout( function(){ flag = false; }, $$.DoubleTapTime);\n\t\t}, { passive: true });\n\n\t\tthis.addEventListener('touchstart', function(){\n\t\t\tmouse = false;\n\t\t}, { passive: true });\n\t}\n}\n","//##############################################################################\n// Prefix Storage\n//\t\t\t\t\t\t\t(C)2019-2022 nabe@abk\n//##############################################################################\n//\n//impliment methods: set(), get(), remove(), clear()\n//\nwindow.PrefixStorage = function(path) {\n\tthis.ls     = localStorage;\n\tthis.prefix = String(path) + '::';\n}\n\n//------------------------------------------------------------------------------\n// member functions\n//------------------------------------------------------------------------------\nPrefixStorage.prototype.set = function (key,val) {\n\tthis.ls[this.prefix + key] = val;\n}\nPrefixStorage.prototype.get = function (key) {\n\treturn this.ls[this.prefix + key];\n}\nPrefixStorage.prototype.getInt = function (key) {\n\tconst v = this.ls[this.prefix + key];\n\tif (v==undefined) return 0;\n\treturn Number(v);\n}\nPrefixStorage.prototype.defined = function (key) {\n\treturn (this.ls[this.prefix + key] !== undefined);\n}\nPrefixStorage.prototype.remove = function(key) {\n\tthis.ls.removeItem(this.prefix + key);\n}\nPrefixStorage.prototype.allclear = function() {\n\tthis.ls.clear();\n}\nPrefixStorage.prototype.clear = function(key) {\n\tconst ls  = this.ls;\n\tconst pf  = this.prefix;\n\tconst len = pf.length;\n\n\tconst ary = [];\n\tfor(let i=0; i<ls.length; i++) {\n\t\tconst k = ls.key(i);\n\t\tif (k.substr(0,len) === pf) ary.push(k);\n\t}\n\t// Do not delete in upper loop\n\tfor(var k in ary) {\n\t\tdelete ls[ary[k]];\n\t}\n}\n","//##############################################################################\n// adiary UI\n//\t\t\t\t\t\t\t(C)2019-2025 nabe@abk\n//##############################################################################\n////////////////////////////////////////////////////////////////////////////////\n// dialog, use Popover API\n////////////////////////////////////////////////////////////////////////////////\n$.fn.adiaryDialog = function(opt = {}) {\n\tconst self = this;\n\tif ( opt === 'open' )\treturn this.adiaryDialogOpen();\n\tif ( opt === 'close' )\treturn this.adiaryDialogClose();\n\n\t////////////////////////////////////////////////////////////////////////\n\t// init dialog\n\t////////////////////////////////////////////////////////////////////////\n\tconst $win = $(window);\n\tconst $dialog = $('<dialog>').addClass('ui-dialog').attr('tabindex', -1);\n\tconst min_w = opt.minWidth  || 200;\n\tconst min_h = opt.minHeight || 150;\n\tlet   width = opt.width     || 300;\n\tif (width<0) width='auto';\n\t$dialog.css({\n\t\twidth:\t\twidth,\n\t\tminWidth:\tmin_w,\n\t\tminHeight:\tmin_h\n\t});\n\tif (opt.maxWidth)    $dialog.css('max-width',  opt.maxWidth );\n\tif (opt.maxHeight)   $dialog.css('max-height', opt.maxHeight);\n\tif (opt.dialogClass) $dialog.addClass( opt.dialogClass );\n\n\tconst data = this.adiaryUIData('dialog', { ...opt });\n\t// data.open        = opt.open;\n\t// data.close       = opt.close;\n\t// data.beforeClose = opt.beforeClose;\n\t// data.modal       = opt.modal;\n\tdata.$dialog = $dialog;\n\tdata.min_h   = min_h;\n\n\t////////////////////////////////////////////////////////////////////////\n\t// header\n\t////////////////////////////////////////////////////////////////////////\n\tconst $title = $('<div>').addClass('ui-dialog-titlebar ui-widget-header');\n\tconst $span  = $('<span>').addClass('ui-dialog-title')\n\t\t.html( opt.title || this.attr('title') || '&ensp;' );\n\t$title.append( $span );\n\t$dialog.append( $title );\n\n\t// close button\n\tif (opt.noExit) {\n\t\t$dialog.on('cancel', function(evt){ return false; });\n\t} else {\n\t\tconst $close = $('<button>').addClass('ui-button').attr({\n\t\t\t\ttitle: 'Close',\n\t\t\t\ttabindex: -1\n\t\t\t});\n\t\t$close.append( $('<span>').addClass('ui-icon ui-icon-closethick') );\n\t\t$title.append( $close );\n\t\t$close.on('click', function(){\n\t\t\tif (opt.exit) opt.exit();\n\t\t\tself.adiaryDialogClose();\n\t\t});\n\n\t\t$dialog.on('keydown', function(evt){\n\t\t\tif (evt.key == 'Escape') $close.click();\n\t\t});\n\t}\n\tdata.$header = $title;\n\n\n\t////////////////////////////////////////////////////////////////////////\n\t// main\n\t////////////////////////////////////////////////////////////////////////\n\tdata.$restore = this.parent();\n\tdata.display  = this.css('display');\n\n\tthis.addClass('ui-dialog-content');\n\t$dialog.append( this );\n\tthis.show();\n\n\t////////////////////////////////////////////////////////////////////////\n\t// button\n\t////////////////////////////////////////////////////////////////////////\n\tif (opt.buttons) {\n\t\tconst $footer = $('<div>').addClass('ui-dialog-buttonpane');\n\t\tconst $btnset = $('<div>').addClass('ui-dialog-buttonset');\n\t\tconst btns = opt.buttons;\n\t\tconst $btns = [];\n\t\tfor(let i in btns) {\n\t\t\tlet $btn = $('<button>')\n\t\t\t\t\t.addClass('ui-button')\n\t\t\t\t\t.attr('type', 'button')\n\t\t\t\t\t.text( i );\n\t\t\t$btn.on('click', btns[i]);\n\t\t\t$btnset.append($btn);\n\t\t\t$btns.push($btn);\n\t\t}\n\t\t$footer.append( $btnset );\n\t\t$dialog.append( $footer );\n\t\tdata.$footer = $footer;\n\t}\n\n\t////////////////////////////////////////////////////////////////////////\n\t// end\n\t////////////////////////////////////////////////////////////////////////\n\tif (opt && !opt.autoOpen && 'autoOpen' in opt) return this;\n\n\treturn this.adiaryDialogOpen();\n}\n\n$.fn.adiaryDialogOpen = function() {\n\tconst data    = this.adiaryUIData('dialog');\n\tconst $dialog = data.$dialog;\n\tif (!$dialog) throw(\"Do not open dialog!\");\n\n\tif (data.modal) {\n\t\t$dialog.adiaryShowModal();\n\t} else {\n\t\t$('body').append($dialog);\n\t\t$dialog[0].show();\n\t\t$dialog.focus();\n\t}\n\n\t// set css\n\tconst $win = $(window);\n\tconst hf   = data.$header.outerHeight() + (data.$footer ? data.$footer.outerHeight() : 0);\n\tthis.css('min-height', (data.min_h    - hf) + 'px');\n\tthis.css('max-height', ($win.height() - hf) + 'px');\n\n\tconst x = $win.scrollLeft() + ($win.width()  - $dialog.outerWidth() )/2;\n\tconst y = $win.scrollTop()  + ($win.height() - $dialog.outerHeight())/2;\n\t$dialog.css({\n\t\tleft:\tx,\n\t\ttop:\ty\n\t});\n\t$dialog.adiaryDraggable({\n\t\thandle: '.ui-dialog-titlebar'\n\t});\n\n\tif (data.open) data.open( null, this );\n\n\treturn this;\n}\n\n$.fn.adiaryDialogClose = function() {\n\tconst data    = this.adiaryUIData('dialog');\n\tconst $dialog = data.$dialog;\n\tif (!$dialog) throw(\"Do not close dialog!\");\n\n\tif (data.beforeClose) data.beforeClose.call( null, this );\n\n\tif (data.modal) {\n\t\t$dialog.adiaryCloseModal();\n\t} else {\n\t\t$dialog[0].close();\n\t\t$dialog.detach();\n\t}\n\tdata.$dialog =null;\n\n\tif (data.$restore && data.$restore.length) {\n\t\tthis.css('display', data.display);\n\t\tdata.$restore.append( this );\n\t}\n\n\tif (data.close) data.close.call( null, this );\n\n\treturn this;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// overlay and modal function\n////////////////////////////////////////////////////////////////////////////////\n$.adiaryShowOverlay = function() {\n\tconst $overlay = $('<dialog>').addClass('ui-overlay').attr('tabindex', -1);;\n\t$overlay.adiaryShowModal();\n\t$overlay.close = function(){\n\t\tthis.adiaryCloseModal();\n\t\treturn this;\n\t}\n\treturn $overlay;\n}\n\n$.fn.adiaryShowModal = function() {\n\tconst inert = this.adiaryUIData('modal-inert', []);\n\t$('body').children().each((idx,dom) => {\n\t\tif (dom.inert) return;\n\t\tinert.push(dom);\n\t\tdom.inert = true;\n\t});\n\tthis.attr('popover', 'manual');\n\t$('body').append(this);\n\tthis[0].showPopover();\n\tthis.focus();\n\n\treturn this;\n}\n\n$.fn.adiaryCloseModal = function() {\n\tconst inert = this.adiaryUIData('modal-inert');\n\tfor(const dom of inert) {\n\t\tdom.inert = false;\n\t}\n\tthis[0].close();\n\tthis.detach();\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Progressbar\n////////////////////////////////////////////////////////////////////////////////\n$.fn.adiaryProgressbar = function(opt) {\n\tconst data  = this.adiaryUIData('progress');\n\tif (opt === 'value') return data.value;\n\n\tif (opt.change)   data.change   = opt.change;\n\tif (opt.complete) data.complete = opt.complete;\n\n\tlet init;\n\tif (!('$value' in data)) {\n\t\tthis.find('.ui-progressbar-value').remove();\n\t\t// initalize\n\t\tdata.$value = $('<div>').addClass('ui-progressbar-value');\n\t\tthis.addClass('ui-progressbar');\n\t\tthis.append( data.$value );\n\t\tinit = true;\n\t}\n\n\t// value set\n\tconst old   = data.value;\n\tconst value = opt.value;\n\tdata.value  = value;\n\tdata.$value.css('width', value + '%');\n\n\tif (init || data.change && old != value) data.change  (data.value);\n\tif (      data.complete && 100 <= value) data.complete(data.value);\n\treturn this;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// accordion\n////////////////////////////////////////////////////////////////////////////////\n$.fn.adiaryAccordion = function(opt) {\n\tconst $objs = this.children(\"h1,h2,h3,h4,h5,h6\");\n\t$objs.click(function(evt){\n\t\tconst $obj = $(evt.target);\n\t\tconst $div = $obj.next('div');\n\t\tif (!$div.length) return;\n\t\t$div.toggleDelay();\n\t});\n\t$objs.next('div').hide();\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// draggable\n////////////////////////////////////////////////////////////////////////////////\n$.fn.adiaryDraggable = function(opt) {\n\tlet sx;\n\tlet sy;\n\tlet $obj;\n\tthis.addClass('aui-draggable');\n\n\tthis.on('mousedown', function(evt){\n\t\t$('iframe').css('pointer-events', 'none');\n\t\tconst $tar = $(evt.target);\n\t\t$obj = $tar.hasClass('aui-draggable') ? $tar : $tar.parentsOne('.aui-draggable');\n\n\t\tif (opt) {\n\t\t\tconst $o = $tar;\n\t\t\tif ($tar != $obj) $o.add($tar.parentsUntil('.aui-draggable'));\n\t\t\tif (opt.cancel &&  $o.filter(opt.cancel).length) return;\n\t\t\tif (opt.handle && !$o.filter(opt.handle).length) return;\n\t\t}\n\t\tconst p = $obj.offset();\n\t\tsx = p.left - evt.pageX;\n\t\tsy = p.top  - evt.pageY;\n\t\tdocument.addEventListener('mousemove', move);\n\t\tevt.preventDefault();\n\t});\n\n\tthis.on('mouseup', function(evt){\n\t\t$('iframe').css('pointer-events', 'auto');\n\t\tdocument.removeEventListener('mousemove', move);\n\t\tevt.preventDefault();\n\t});\n\n\tfunction move(evt) {\n\t\tconst x = sx + evt.pageX;\n\t\tconst y = sy + evt.pageY;\n\t\t$obj.css({\n\t\t\tposition:\t'absolute',\n\t\t\tleft:\t\tx + 'px',\n\t\t\ttop:\t\ty + 'px'\n\t\t});\n\t\tevt.preventDefault();\n\t}\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// data function\n////////////////////////////////////////////////////////////////////////////////\n$.fn.adiaryUIData = function(name, val) {\n\tname = 'aui_' + name;\n\tif (arguments.length==2) this[name] = val;\n\tconst data = this[name] ||= {};\n\treturn data;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// filter function\n////////////////////////////////////////////////////////////////////////////////\n$.adiaryUIFilterExists = function($objs, callback) {\n\tconst $ary  = [];\n\tconst $body = $('body');\n\n\tfor(let k in $objs) {\n\t\tif (! $body.find($objs[k]).length) continue;\n\t\t$ary.push($objs[k]);\n\t\tif (callback) callback($objs[k]);\n\t}\n\treturn $ary;\n}","////////////////////////////////////////////////////////////////////////////////\n// make main object\n////////////////////////////////////////////////////////////////////////////////\n'use strict';\nlet $$ = {\n\tname:\t\t\t'asys',\t// global export name\n\tInitialize:\t\ttrue,\t// auto run $$.init()\n\n\tDefaultShowSpeed:\t300,\t// msec\n\tTouchDnDTime:\t\t100,\t// msec\n\tDoubleTapTime:\t\t400,\t// msec\n\tPopupDelayTime:\t\t300,\t// msec\n\tPopupOffsetX:\t\t 15,\n\tPopupOffsetY:\t\t 10\n};\n\n////////////////////////////////////////////////////////////////////////////////\n// initalize\n////////////////////////////////////////////////////////////////////////////////\n(function(){\n\tconst ary = [];\n\tlet   initialized;\n\n\t$$.init = function(func, priority) {\n\t\tif (func) {\n\t\t\tif (initialized) {\n\t\t\t\tif (priority) console.warn('init() initialized, but priority set', priority);\n\t\t\t\tfunc.call(this);\n\t\t\t}\n\t\t\treturn ary.push({\n\t\t\t\tfunc:\tfunc,\n\t\t\t\tp:\tpriority || 100\n\t\t\t});\n\t\t}\n\n\t\t// initlize functions\n\t\tary.sort(function(a,b) {\n\t\t\treturn a.p - b.p;\n\t\t});\n\n\t\tfor(var i=0; i<ary.length; i++)\n\t\t\tary[i].func.call(this);\n\n\t\tinitialized = true;\n\t};\n})();\n\n////////////////////////////////////////////////////////////////////////////////\n// load message\n////////////////////////////////////////////////////////////////////////////////\n$$.msg = function(key, _default) {\n\tif (!this.msgs) {\n\t\tconst msgs = this.msgs = this.msgs || {};\n\t\tif (this.load_msg) this.load_msg();\n\t}\n\tconst val = this.msgs[key];\n\treturn (val === undefined) ? (_default || key.toUpperCase()) : val;\n}\n$$.set_msg = function(obj, msg) {\n\tconst msgs = this.msgs = this.msgs || {};\n\n\tif (typeof(obj) != 'object') {\n\t\tmsgs[obj] = msg;\n\t\treturn;\n\t}\n\tconst keys = Object.keys(obj);\n\tfor(let i=0; i<keys.length; i++) {\n\t\tmsgs[ keys[i] ] = obj[ keys[i] ];\n\t}\n}\n\n$$.load_msg = function($obj) {\n\tif (!($obj in jQuery)) { $obj = $($obj); }\n\n\tconst msgs = this.msgs = this.msgs || {};\n\n\t$obj.each(function(idx,dom) {\n\t\ttry {\n\t\t\tconst json = $(dom).html().replace(/^[\\s\\S]*?{/, '{').replace(/}[\\s\\S]*?$/, '}');\n\t\t\tconst data = JSON.parse(json);\n\t\t\tfor(var i in data)\n\t\t\t\tmsgs[i] = data[i];\n\t\t} catch(e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t});\n}\n\n","//##############################################################################\n// dialog functions\n//##############################################################################\n$$.dialog = function($div, opt = {}) {\n\t//--------------------------------------------------\n\t// Create Promise if not set callback().\n\t// This promise is not call reject().\n\t//--------------------------------------------------\n\tif (!opt.callback) {\n\t\tconst self=this;\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\tself.dialog($div, {\n\t\t\t\t...opt,\n\t\t\t\tcallback: resolve\n\t\t\t});\n\t\t});\n\t}\n\n\t//--------------------------------------------------\n\t// main\n\t//--------------------------------------------------\n\tconst ok = opt.ok || this.msg('ok');\n\tconst btn= {};\n\tbtn[ok] = function(){\n\t\t$div.adiaryDialog('close');\n\t\tif (opt.callback) opt.callback( $div.prop('tagName')==='FORM' ? $div.parseFormHash() : true );\n\t};\n\tif (opt.cancelBtn) {\n\t\tbtn[ opt.cancel || this.msg('cancel') ] = function(){\n\t\t\t$div.adiaryDialog('close');\n\t\t\tif (opt.callback) opt.callback(false);\n\t\t};\n\t}\n\n\t// stop submit by enter and push ok button\n\tconst keyfunc = function(evt) {\n\t\tif (evt.which !== 13) return true;\n\t\tbtn[ok]();\n\t\treturn false;\n\t}\n\t$div.on('keypress', 'input', keyfunc);\n\n\t$div.adiaryDialog({\n\t\tnoExit: opt.noExit,\n\t\tmodal: true,\n\t\ttitle: opt.title,\n\t\tdialogClass: opt.class,\n\t\tbuttons: btn,\n\t\topen: function(){\n\t\t\tconst $bp = $div.siblings('.ui-dialog-buttonpane');\n\t\t\tif (opt.focus === 'ok')     $bp.find('button:eq(0)').focus();\n\t\t\tif (opt.focus === 'cancel') $bp.find('button:eq(1)').focus();\n\t\t},\n\t\texit: function(){\n\t\t\tif (opt.callback) opt.callback(false);\n\t\t},\n\t\tbeforeClose: function(){\n\t\t\t$div.off('keypress', 'input', keyfunc);\n\t\t},\n\t\tminWidth:  opt.minWidth  || $div.data('min-width'),\n\t\tminHeight: opt.minHeight || $div.data('min-height'),\n\t\twidth:     opt.width     || $div.data('width')\n\t});\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// base dialog\n////////////////////////////////////////////////////////////////////////////////\n$$.dialog_base = function(opt, msg, marg, callback) {\n\tif (!callback && typeof(marg) === 'function') {\n\t\tcallback = marg; marg = null;\n\t}\n\n\tlet $div;\n\tif (msg instanceof $) {\n\t\t$div = msg;\n\n\t} else {\n\t\tif (msg instanceof Object) {\n\t\t\topt = {...opt, ...msg};\n\t\t\tmsg = msg.html;\n\t\t}\n\n\t\tif (msg && msg.substr(0,1)==='#') {\n\t\t\t$div = $secure(msg);\n\n\t\t} else {\n\t\t\t$div = $('<div>');\n\t\t\tif (marg) {\n\t\t\t\tmsg = msg.replace(/%([A-Za-z])/g, function(w,m1){ return marg[m1] });\n\t\t\t\tmsg = msg.replace(/%[A-Za-z]/g, '');\n\t\t\t}\n\t\t\t$div.html( msg );\n\t\t}\n\t}\n\topt.title ||= $div && $div.data('title') || this.msg('confirm');\n\n\tif (callback) opt.callback=callback;\n\n\treturn this.dialog($div, opt);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// dialogs\n////////////////////////////////////////////////////////////////////////////////\n$$.show_dialog = function(msg, marg, callback, opt = {}) {\n\treturn this.dialog_base(opt, msg, marg, callback);\n}\n\n$$.show_error = function(msg, marg, callback, opt) {\n\treturn this.dialog_base({\n\t\t\tclass:\t'error-dialog',\n\t\t\ttitle:\tthis.msg('error'),\n\t\t\t...opt\n\t\t},\n\t\tmsg, marg, callback);\n}\n\n$$.confirm = function(msg, marg, callback, opt) {\n\t\treturn this.dialog_base({\n\t\t\tcancelBtn:\ttrue,\n\t\t\ttitle:\t\tthis.msg('confirm'),\n\t\t\t...opt\n\t\t},\n\t\tmsg, marg, callback);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// form dialog\n////////////////////////////////////////////////////////////////////////////////\n$$.form_dialog = function(title, ele, callback) {\n\n\tlet $form;\n\n\tif (ele instanceof $) {\n\t\t$form = ele;\n\n\t} else {\n\t\t$form = $('<form>');\n\t\tif (!Array.isArray(ele)) ele = [ ele ];\n\n\t\tfor(const x of ele) {\n\t\t\tif (typeof(x) === 'string') {\n\t\t\t\t$form.append( $('<div>').html(x) );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (x.type == 'p') {\n\t\t\t\t$form.append( $('<p>').html( x.html ) );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (x.type == 'textarea') {\n\t\t\t\tconst $ta = $('<textarea>').attr({\n\t\t\t\t\trows: x.rows || 5,\n\t\t\t\t\tname: x.name\n\t\t\t\t}).addClass('w100p');\n\t\t\t\tif (x.val != '') $ta.text( x.val );\n\t\t\t\t$form.append( $ta );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (x.type == '*') {\n\t\t\t\t$form.append( x.html );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// else\n\t\t\tconst $item = $('<div>');\n\t\t\tif ('before' in x) $item.append(x.before);\n\n\t\t\t$item.append($('<input>').attr({\n\t\t\t\t\ttype: x.type || 'text',\n\t\t\t\t\tname: x.name,\n\t\t\t\t\tvalue: x.value\n\t\t\t\t}).addClass( x.class || 'w80p')\n\t\t\t);\n\t\t\tif (x.iclass) $item.addClass(x.iclass);\n\n\t\t\tif ('after' in x) $item.append(x.after);\n\t\t\t$form.append( $item );\n\t\t}\n\t}\n\n\treturn this.dialog($form, {\n\t\ttitle: title,\n\t\tcallback: callback\n\t});\n}\n","//##############################################################################\n// Ajax\n//##############################################################################\n////////////////////////////////////////////////////////////////////////////////\n// send_ajax\n////////////////////////////////////////////////////////////////////////////////\n$$.send_ajax = function(opt) {\n\tconst self=this;\n\t//--------------------------------------------------\n\t// Create Promise if not set callback functions.\n\t//--------------------------------------------------\n\tif (!opt.success && !opt.error_dialog_callback) {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\tself.send_ajax({\n\t\t\t\t...opt,\n\t\t\t\tsuccess: resolve,\n\t\t\t\terror_dialog_callback: reject\n\t\t\t});\n\t\t});\n\t}\n\n\t//--------------------------------------------------\n\t// main\n\t//--------------------------------------------------\n\tfunction ajax_error(err, h) {\n\t\tif (opt.error) if (!opt.error(err, h)) return;\n\n\t\tlet msg = '';\n\t\tif (h) {\n\t\t\tif (h.msg) msg += '<p>' + self.tag_esc(h.msg.toString()) + '</p>';\n\t\t\tif (h.errs) {\n\t\t\t\tconst ary = [];\n\t\t\t\tconst e = h.errs;\n\t\t\t\tconst o = e._order || Object.keys(e);\n\t\t\t\tfor(let i in o) {\n\t\t\t\t\tif (e[o[i]]=='') continue;\n\t\t\t\t\tary.push( self.tag_esc(e[o[i]]) );\n\t\t\t\t}\n\t\t\t\tmsg += '<p class=\"ni\">' + ary.join(\"<br>\") + '</p>';\n\t\t\t}\n\t\t\tif (h._debug) msg += '<p class=\"ni\">' + h._debug.replace(/\\n/g, '<br>') + '</p>';\n\t\t} else {\n\t\t\tmsg = '<p>' + self.msg('server_response_error', 'response data error!') + '</p>';\n\t\t}\n\t\tself.show_error(msg, function(){\n\t\t\tif (opt.error_dialog_callback) opt.error_dialog_callback(err, h)\n\t\t});\n\t}\n\tconst data = opt.data;\n\treturn $.ajax(opt.url || self.myself || './', {\n\t\tmethod:\t\t'POST',\n\t\tdata:\t\tdata.toString() === '[object Object]' ? $.param(data) : data,\n\t\tprocessData:\tfalse,\n\t\tcontentType:\tfalse,\n\t\tdataType:\t'json',\n\t\terror:\t\tajax_error,\n\t\tsuccess:\tfunction(h) {\n\t\t\tif (h.ret != '0') return ajax_error('ret!=0', h);\n\t\t\tif (h._debug)     return ajax_error('_debug', h);\n\t\t\tif (opt.success) opt.success(h);\n\t\t},\n\t\tcomplete:\topt.complete,\n\t});\n};\n","////////////////////////////////////////////////////////////////////////////////\n// popup for mouseenter\n////////////////////////////////////////////////////////////////////////////////\n$$.popup = function(evt) {\n\tconst self  = this;\n\tconst $obj  = $(evt.target);\n\tlet   delay = $obj.data('delay') || this.PopupDelayTime;\n\tif (delay<1) delay=1;\n\n\tif (!evt.data.$div) {\n\t\tconst $popup = $('<div>').addClass('popup-block');\n\t\tthis.$body.append( $popup );\n\t \tevt.data.$div = $popup;\n\t}\n\n\t$obj.on('mouseleave', evt.data, function(evt){ self.popup_hide(evt) });\n\t$obj.data('timer', setTimeout(  function()   { self.popup_show(evt) }, delay));\n}\n\n$$.popup_show = function(evt) {\n\tconst $obj = $(evt.target);\n\tconst $div = evt.data.$div;\n\tif ($div.is(\":animated\")) return;\n\n\tif (evt.data.show) evt.data.show(evt, $obj, $div);\n\t$div.css(\"left\", (this.SP ? 0 : (evt.pageX + this.PopupOffsetX)));\n\t$div.css(\"top\" ,                 evt.pageY + this.PopupOffsetY);\n\t$div.showDelay();\n}\n\n$$.popup_hide = function(evt) {\n\tconst $obj = $(evt.target);\n\tconst $div = evt.data.$div;\n\tif ($obj.data('timer')) {\n\t\tclearTimeout( $obj.data('timer') );\n\t\t$obj.data('timer', null);\n\t}\n\t$obj.off('mouseout');\n\t$div.hide();\n\tif (evt.data.hide) evt.data.hide(evt, $obj, $div);\n}\n\n","//##############################################################################\n// dom extentions\n//##############################################################################\n////////////////////////////////////////////////////////////////////////////////\n// popup-help\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tconst self = this;\n\tconst help = '.help[data-help]';\n\tthis.$body.on('mouseover', help, {\n\t\tshow: function(evt, $obj, $div){\n\t\t\tconst text = self.tag_esc_br( $obj.data(\"help\") );\n\t\t\t$div.addClass('popup popup-help');\n\t\t\t$div.html( text );\n\t\t}\n\t}, function(evt){ self.popup(evt) });\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// button for link\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tthis.$body.on('click', 'button[data-href]', function(evt){\n\t\tlocation.href = $(evt.target).data('href');\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// button for value set to form element\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tthis.$body.on('click', 'button.js-set-value[data-target]', function(evt){\n\t\tconst $btn = $(evt.target);\n\t\t$($btn.data('target')).val( $btn.attr('value') );\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// do not submit by enter key\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tthis.$body.on('keypress', 'input.no-enter-submit, form.no-enter-submit input', function(evt){\n\t\tif (evt.which === 13) return false;\n\t\treturn true;\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// file upload button\n////////////////////////////////////////////////////////////////////////////////\n// <button class=\"js-file-btn\" data-target=\"#fileup\">\n// <input type=\"file\" id=\"fileup\" style=\"display:none\" data-target=\"#file-list\">\n// <span id=\"file-list\"></span>\n//\n$$.init(function(){\n\tthis.$body.on('click', 'button.js-file-btn', function(evt) {\n\t\tconst $obj = $(evt.target);\n\t\tconst $tar = $($obj.data('target'));\n\t\tif (! $tar.length ) return;\n\n\n\t\tif ($tar.data('target') && !$tar.data('--regist-change-evt')) {\n\t\t\t$tar.data('--regist-change-evt', true);\n\t\t\t$tar.on('change', function(evt){\n\t\t\t\tconst $span = $tar.rootfind( $tar.data('target') );\n\t\t\t\tconst file  = $tar.val().replace(/^.*?([^\\\\\\/]*)$/, \"$1\");\n\t\t\t\t$span.text( file );\n\t\t\t})\n\t\t}\n\n\t\t$tar.click();\n\t});\n});\n////////////////////////////////////////////////////////////////////////////////\n// file reset button\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tthis.$body.on('click', 'button.js-reset-btn', function(evt) {\n\t\tconst $obj = $(evt.target);\n\t\tconst $tar = $($obj.data('target'));\n\t\tif (!$tar.length || $tar.val()=='') return;\n\t\t$tar.val('').change();\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// check all\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tthis.$body.on('change', 'input.js-checked', function(evt){\n\t\tconst $obj   = $(evt.target);\n\t\tconst target = $obj.data( 'target' );\n\t\t$(target).prop(\"checked\", $obj.is(\":checked\"));\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// submit on change\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tthis.$body.on('change', '.js-on-change-submit', function(evt){\n\t\tconst $obj = $(evt.target);\n\t\t$obj.parentsOne('form').trigger('submit');\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// line click for check on table\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tthis.$body.on('click', 'tbody.js-line-checked', function(evt){\n\t\tconst $obj = $(evt.target);\n\t\tconst $pars= $obj.parents('tr');\n\t\tif ($pars.add($obj).filter('a,input,button,label,.line-checked-cancel').length) return;\n\n\t\tconst $tr  = $pars.last();\n\t\tconst $inp = $tr.find('input[type=\"checkbox\"],input[type=\"radio\"]');\n\t\t$inp.first().click();\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// combo box\n////////////////////////////////////////////////////////////////////////////////\n// used by select.js-save\n$$.js_combo_dummy_val  = \"\\e\\e\\e\\e\\e\\n\\n\";\n$$.set_value_on_select = function($select, val) {\n\t$select.val( val );\n\tif ($select.val() != val) {\n\t\tconst format = $select.data('format') || '%v';\n\t\tconst text = format.replace(/%v/g, val);\n\t\tconst $opt = $('<option>').attr('value', val).text( text );\n\t\t$select.append( $opt );\n\t\t$select.val( val );\n\t}\n\t$select.change();\n}\n\n$$.init(function(){\n\tconst self  = this;\n\tconst dummy = this.js_combo_dummy_val;\n\n\tasync function change_select(evt) {\n\t\tconst $select = $(evt.target);\n\t\tconst _val    = $select.val();\n\t\tif (_val !== dummy)\n\t\t\treturn $select.data('current', _val);\n\t\t\n\t\tconst val = $select.data('current');\n\t\t$select.val( val );\n\n\t\tconst element = { name: 'data', value: val, class: $select.data('class') };\n\t\tconst format  = $select.data('format') || '';\n\t\tconst ma = format.match(/^(.*)%v(.*)$/);\n\t\tif (ma) {\n\t\t\telement.before = ma[1];\n\t\t\telement.after  = ma[2];\n\t\t}\n\n\t\tconst h = await self.form_dialog($select.data('title'), element);\n\t\tif (h) {\n\t\t\tconst val = h.data;\n\t\t\tif (val == '' || $select.val() == val) return;\n\n\t\t\tself.set_value_on_select( $select, val );\n\t\t\t$select.data('current', val);\n\t\t}\n\t}\n\n\t// initalize\n\tthis.$body.on('focus', 'select.js-combo', function(evt){\n\t\tconst $obj = $(evt.target);\n\t\t$obj.data('current', $obj.val() );\n\n\t\tif ($obj.find('option[value=\"' + dummy + '\"]').length) return;\n\t\t// add other option\n\t\tconst $opt = $('<option>').attr('value', dummy).text( self.msg('other') );\n\t\t$obj.append( $opt );\n\n\t\t$obj.on('change', change_select );\n\t});\n})\n\n////////////////////////////////////////////////////////////////////////////////\n// sortable table\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tconst self  = this;\n\n\tthis.$body.on('click', 'table.js-sortablex thead', function(evt){\n\t\tconst $o1  = $(evt.target).filter('th,td');\n\t\tconst $obj = $o1.length ? $o1 : $(evt.target).parentsOne('th,td');\n\t\tif ($obj.hasClass('disable-sort')) return;\n\n\t\tlet cnt=0;\n\t\tlet $x = $obj;\n\t\twhile($x.length) {\n\t\t\t$x = $x.prev();\n\t\t\tcnt++;\n\t\t}\n\n\t\tconst $tbody  = $obj.parentsOne('table').children('tbody');\n\t\tconst td_nth  = 'td:nth-child(' + cnt + ')';\n\t\tconst reverse = $tbody.data('_sortable_prev_cnt') == cnt;\n\t\t$tbody.data('_sortable_prev_cnt', reverse ? -1 : cnt);\n\n\t\t$tbody.each(function(idx,dom){\n\t\t\tconst $tbody = $(dom);\n\t\t\tlet   isNum  = true;\n\t\t\tconst lines  = [];\n\t\t\t$tbody.children('tr').each(function(i2,tr){\n\t\t\t\tconst $tr = $(tr);\n\t\t\t\tconst $td = $tr.children(td_nth);\n\t\t\t\tconst val = $td.existsData('sort') ? $td.data('sort') : $td.text().replace(/^\\s+/, '').replace(/\\s+$/, '');\n\t\t\t\tconst num = Number(val);\n\t\t\t\tif (isNaN(num)) isNum = false;\n\n\t\t\t\tlines.push({\n\t\t\t\t\tval:\tval,\n\t\t\t\t\tnum:\tnum,\n\t\t\t\t\t$tr:\t$tr\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (isNum) lines.sort(function(a,b){ return a.num - b.num; });\n\t\t\t      else lines.sort(function(a,b){ return a.val===b.val ? 0 : a.val < b.val; });\t// Do not work IE11\n\t\t\tif (reverse) lines.reverse();\n\n\t\t\t$tbody.empty();\n\t\t\tfor(let i in lines) $tbody.append(lines[i].$tr);\n\t\t});\n\t});\n})\n","//##############################################################################\n// dom special extentions\n//##############################################################################\n(function(){\n\tconst ary = [];\n\tlet   initialized;\n\n\t$$.dom_init = function(func, priority) {\n\t\tif (typeof(func) == 'function') {\n\t\t\tif (initialized) {\n\t\t\t\tif (priority) console.warn('dom_init() initialized, but priority set', priority);\n\t\t\t\tfunc.call(this, this.$body);\n\t\t\t}\n\t\t\treturn ary.push({\n\t\t\t\tfunc:\tfunc,\n\t\t\t\tp:\tpriority || 100\n\t\t\t});\n\t\t}\n\n\t\t// initlize functions\n\t\tary.sort(function(a,b) {\n\t\t\treturn a.p - b.p;\n\t\t});\n\n\t\tconst $obj = func ? func : this.$body;\n\t\tfor(var i=0; i<ary.length; i++)\n\t\t\tary[i].func.call(this, $obj);\n\n\t\tinitialized = true;\n\t};\n\n\t$$.init($$.dom_init);\n})();\n\n////////////////////////////////////////////////////////////////////////////////\n// submit checker\n////////////////////////////////////////////////////////////////////////////////\n$$.dom_init( function($R){\n\tconst self=this;\n\n\t$R.findx('button.js-check-form').on('click', function(evt){\n\t\tconst $obj  = $(evt.target);\n\t\tconst $form = $obj.parents('form.js-check-form');\n\t\tif (!$form.length) return;\n\t\t$form.data('confirm', $obj.data('confirm') );\n\t\t$form.data('focus',   $obj.data('focus')   );\n\t\t$form.data('button',  $obj);\n\t});\n\n\t$R.findx('form.js-check-form').onSequence('submit', 10, function(evt){\n\t\tconst $form  = $(evt.target);\n\t\tconst target = $form.data('target');\n\t\tlet count=0;\n\t\tif (target) {\n\t\t\tcount = $form.rootfind( target + \":checked\" ).length;\n\t\t\tif (!count) return false;\t// no check\n\t\t}\n\n\t\t// confirm message\n\t\tlet confirm = $form.data('confirm');\n\t\tif (!confirm) return true;\n  \t\tif ($form.data('--js-check-form-ok')) {\n  \t\t\t$form.data('--js-check-form-ok', false);\n  \t\t\treturn true;\n  \t\t}\n\n\t\t// confirm dialog\n\t\tself.dialog_base({\n\t\t\ttitle:\t\tself.msg('confirm'),\n\t\t\tfocus:\t\t$form.data('focus'),\n\t\t\tcancelBtn:\ttrue\n\t\t}, confirm, { c: count }\n\t\t, function(flag) {\n\t\t\tif (!flag) return;\n  \t\t\t$form.data('--js-check-form-ok', true);\n\t\t\tif ($form.data('button')) return $form.data('button').click();\n\n\t\t\t$form.triggerWithOE(evt.originalEvent);\n\t\t});\n\t\treturn false;\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// ajax form\n////////////////////////////////////////////////////////////////////////////////\n$$.dom_init( function($R) {\n\tconst self=this;\n\tconst submit_func = function(evt, $form){\n\t\t$form.find('.error').removeClass('error');\n\n\t\t// form data\n\t\tconst gen  = $form.data('generator');\n\t\tlet   data = gen ? gen($form, evt) : new FormData($form[0]);\n\n\t\t// submitter button\n\t\tconst sb = evt.originalEvent && evt.originalEvent.submitter;\n\t\tif (sb && sb.tagName==='BUTTON' && sb.name!=='')\n\t\t\tdata.append(sb.name, sb.value);\n\n\t\t// submit url-encode\n\t\tif (!gen && !$form.find('input[type=\"file\"]').length)\n\t\t\tdata = new URLSearchParams(data);\n\n\t\t// stop re-entry\n\t\tif (!$form.data('reentry')) {\n\t\t\tif ($form.data('--js-ajax-stop')) return;\n\t\t\t$form.data('--js-ajax-stop', true);\n\t\t\t$form.prop('disabled', true);\n\t\t}\n\n\t\tconst $overlay   = $form.data('overlay') && $.adiaryShowOverlay();\n\t\tconst start_func = $form.data('start');\n\t\tconst comp_func  = $form.data('complete');\n\t\tif (typeof(start_func) === 'function') start_func($form);\n\n\t\tself.send_ajax({\n\t\t\turl:\t$form.attr('action'),\n\t\t\tdata:\tdata,\n\t\t\tsuccess: function(h) {\n\t\t\t\tif ($overlay) $overlay.close();\n\t\t\t\tconst success = $form.data('success');\n\t\t\t\tconst url = $form.data('url');\n\t\t\t\tif (typeof(success) === 'function') return success(h);\n\t\t\t\tif (typeof(success) === 'string' && success != '') {\n\t\t\t\t\treturn self.show_dialog(success, function(){\n\t\t\t\t\t\tif (url) location = url;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (url) location = url;\n\t\t\t},\n\t\t\terror: function(err, h) {\n\t\t\t\tif ($overlay) $overlay.close();\n\t\t\t\tconst error = $form.data('error');\n\t\t\t\tif (typeof(error) === 'function') return error(h);\n\n\t\t\t\tif (!h || !h.errs) return true;\n\t\t\t\tconst e = h.errs;\n\t\t\t\tfor(let k in e) {\n\t\t\t\t\tif (k == '_order') continue;\n\n\t\t\t\t\t// with number?\n\t\t\t\t\tconst ma  = k.match(/^(.*)#(\\d+)$/);\n\t\t\t\t\tconst num = ma ? ma[2] : undefined;\n\t\t\t\t\tk = ma ? ma[1] : k;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet $x = $form.find('[name=\"' + k+ '\"], [data-name=\"' + k + '\"]');\n\t\t\t\t\t\tif (num) $x = $($x[num-1]);\n\t\t\t\t\t\t$x.addClass('error');\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\terror_dialog_callback: function(){\n\t\t\t\tconst callback = $form.data('error_dialog_callback');\n\t\t\t\tif (typeof(callback) === 'function') return callback();\n\t\t\t},\n\t\t\tcomplete: function(h) {\n\t\t\t\tif (typeof(comp_func) === 'function') comp_func($form);\n\t\t\t\tif ($form.data('--js-ajax-stop')) {\n\t\t\t\t\t$form.data('--js-ajax-stop', false);\n\t\t\t\t\t$form.prop('disabled', false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\t$R.find('form.js-ajax').onSequence('submit', 100, function(evt) {\n\t\tconst $form  = $(evt.target);\n\t\tconst submit = function(){ submit_func(evt, $form) };\n\n\t\tconst checker = $form.data('checker');\n\t\tif (typeof(checker) === 'function') {\n\t\t\tif (! checker($form, submit)) return false;\n\t\t}\n\t\tsubmit();\n\t\treturn false;\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// auto save form value\n////////////////////////////////////////////////////////////////////////////////\n$$.dom_init( function($R) {\n\tconst self = this;\n\n\t$R.findx('input.js-save, select.js-save').each( function(idx, dom) {\n\t\tconst $obj = $(dom);\n\t\tconst type = $obj[0].type;\n\n\t\tlet id = type != 'radio' && $obj.attr(\"id\");\n\t\tif (!id) id = 'name=' + $obj.attr(\"name\");\n\t\tif (!id) return;\n\n\t\tif (type == 'checkbox') {\n\t\t\t$obj.change( function(evt){\n\t\t\t\tconst $o = $(evt.target);\n\t\t\t\tself.Storage.set(id, $o.prop('checked') ? 1 : 0);\n\t\t\t});\n\t\t\tif ( self.Storage.defined(id) )\n\t\t\t\t$obj.prop('checked', self.Storage.get(id) != 0 );\n\t\t\treturn;\n\t\t}\n\t\tif (type == 'radio') {\n\t\t\tconst val = $obj.attr('value');\n\t\t\t$obj.change( function(evt){\n\t\t\t\tconst $o = $(evt.target);\n\t\t\t\tself.Storage.set(id, val);\n\t\t\t});\n\t\t\tif ( self.Storage.defined(id) && val == self.Storage.get(id)) {\n\t\t\t\t$obj.prop('checked', 1);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t$obj.change( function(evt){\n\t\t\tconst $o = $(evt.target);\n\t\t\tif ($o.val() == self.js_combo_dummy_val) return;\n\t\t\tself.Storage.set(id, $o.val());\n\t\t});\n\t\tconst val = self.Storage.get(id);\n\t\tif (! val) return;\n\t\tif (dom.tagName == 'SELECT')\n\t\t\treturn self.set_value_on_select( $obj, val );\n\t\t\n\t\treturn $obj.val( val );\n\t});\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// form dom element enable/disable by other form elements\n////////////////////////////////////////////////////////////////////////////////\n$$.dom_init( function($R){\n\tconst $objs = $R.findx('input.js-enable, input.js-disable, select.js-enable, select.js-disable');\n\n\tlet   init;\n\tconst func = function(evt) {\n\t\tconst $btn = $(evt.target);\n\t\tconst $tar = $btn.rootfind( $btn.data('target') );\n\n\t\tconst type = $btn[0].type;\n\n\t\t// radio button with data-state=\"0\" or \"1\"\n\t\tif (type == 'radio') {\n\t\t\tif ($btn.prop(\"disabled\") || !$btn.prop(\"checked\")) return;\n\t\t\tlet flag = $btn.data(\"state\");\n\t\t\tif ($btn.hasClass('js-enable')) flag=!flag;\n\t\t\t$tar.prop('disabled', flag);\n\t\t\treturn;\n\t\t}\n\n\t\tlet flag;\n\t\tif (type == 'checkbox') {\n\t\t\tflag = !$btn.prop(\"disabled\") && $btn.prop(\"checked\");\n\t\t} else if (type == 'number' || $btn.data('type') == 'int') {\n\t\t\tvar val = $btn.val();\n\t\t\tflag = val.length && val > 0;\n\t\t} else {\n\t\t\tflag = ! ($btn.val() + '').match(/^\\s*$/);\n\t\t}\n\n\t\t// change flag?\n\t\tif (!init && $btn.data('_flag') === flag) return;\n\t\t$btn.data('_flag', flag);\n\n\t\t// disabled?\n\t\tconst counter = $btn.hasClass('js-disable') ? '_disable_c' :  '_enable_c';\n\t\tconst add     = flag ? 1 : (init ? 0 : -1);\n\t\t$tar.each(function(idx,dom){\n\t\t\tconst $obj = $(dom);\n\t\t\t$obj.data(counter, ($obj.data(counter) || 0) + add);\n\n\t\t\tconst diff = ($obj.data('_disable_c') || 0) - ($obj.data('_enable_c') || 0)\n\t\t\t\t   + ($btn.hasClass('js-enable') ? 0.1 : 0);\n\n\t\t\t$obj.prop('disabled', diff>0);\n\t\t});\n\t}\n\t// regist\n\t$objs.change( func );\n\tinit = true;\n\t$objs.change();\n\tinit = false;\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// click for dom show/hide\n////////////////////////////////////////////////////////////////////////////////\n/* example)\n\t<label><input type=\"checkbox\" class=\"js-switch\" data-target=\"xxx\"></label>\n\t<button type=\"button\" class=\"js-switch\"  data-target=\"xxx\"\n\t data-delay=\"300\"\n\t data-hide-val=\"show it\" data-show-val=\"hide it\" data-negative=\"1\">msg</button>\n*/\n(function(){\n\tfunction toggle($obj, init) {\n\t\tif ($obj[0].tagName == 'A') return true;\t// link click\n\n\t\t// append switch icon\n\t\tif (init && $obj[0].tagName != 'INPUT' && $obj[0].tagName != 'BUTTON') {\n\t\t\tconst $span = $('<span>');\n\t\t\t$span.addClass('ui-icon switch-icon');\n\t\t\t$obj.prepend($span).addClass('sw-show');\n\t\t}\n\n\t\tconst type = $obj[0].tagName == 'INPUT' && $obj[0].type;\n\t\tlet   tar  = $obj.data('target');\n\t\tif (!tar) {\n\t\t\t// $obj is children\n\t\t\t$obj = $obj.parentsOne(\".js-switch\");\n\t\t\tif (!$obj.length) return;\n\t\t\ttar = $obj.data('target');\n\t\t}\n\t\tconst $target = $(tar);\n\t\tif (!$target.length) return false;\n\n\t\t// save switch status\n\t\tconst storage = $obj.existsData('save') ? this.Storage : null;\n\n\t\t// get current state\n\t\tconst id = $obj.attr('id') || $obj.attr('name') || tar;\n\t\tlet flag;\n\t\tif (init && storage && storage.defined(id)) {\n\t\t\tflag = storage.getInt(id) ? true : false;\n\t\t\tif (type == 'checkbox' || type == 'radio') $obj.prop(\"checked\", flag);\n\t\t} else if (type == 'checkbox' || type == 'radio') {\n\t\t\tflag = $obj.prop(\"checked\");\n\t\t} else if (init && $obj.data('default') == 'show') {\n\t\t\tflag = true;\n\t\t} else if (init && $obj.data('default') == 'hide') {\n\t\t\tflag = false;\n\t\t} else {\n\t\t\tflag = init ? !$target.is(':hidden') : $target.is(':hidden');\n\t\t}\n\t\tif ($obj.data('negative')) flag = !flag;\n\n\t\t// show speed\n\t\tlet delay = $obj.data('delay');\n\t\tif (delay === undefined || delay === '') delay = this.DefaultShowSpeed;\n\n\t\t// fast mode\n\t\tif ($obj.data('fast')) {\n\t\t\tconst css_id = '--css--' + id.replace(/[^\\w\\-]/g, '-');\n\t\t\tlet   $css   = $('#' + css_id);\n\t\t\tif (!$css.length) {\n\t\t\t\t$css = $('<style>').attr('id', css_id);\n\t\t\t\t$('head').append($css);\n\t\t\t}\n\t\t\t$css.text( flag ? '' : tar + '{ display: none; }' );\n\t\t\treturn true;\n\t\t}\n\n\t\t// set state\n\t\tif (flag) {\n\t\t\t$obj.addClass('sw-show');\n\t\t\t$obj.removeClass('sw-hide');\n\t\t\tif (init) $target.show();\n\t\t\t     else $target.show(delay);\n\t\t\tif (storage) storage.set(id, '1');\n\t\t\n\t\t} else {\n\t\t\t$obj.addClass('sw-hide');\n\t\t\t$obj.removeClass('sw-show');\n\t\t\tif (init) $target.hide();\n\t\t\t     else $target.hide(delay);\n\t\t\tif (storage) storage.set(id, '0');\n\t\t}\n\t\tif (type == 'button') {\n\t\t\tconst val = flag ? $obj.data('show-val') : $obj.data('hide-val');\n\t\t\tif (val != undefined) $obj.val( val );\n\t\t}\n\t\treturn true;\n\t}\n\n\t$$.dom_init( function($R){\n\t\tconst self = this;\n\t\tconst func = function(evt){\n\t\t\tconst $obj = $(evt.target);\n\t\t\tif ($obj[0].type != \"radio\")\n\t\t\t\treturn toggle.call(self, $obj);\n\n\t\t\tconst name = $obj.attr('name');\n\t\t\t$('input.js-switch[name=\\\"' + name + '\"]').each(function(idx, dom){\n\t\t\t\t toggle.call(self, $(dom));\n\t\t\t});\n\t\t}\n\n\t\t$R.findx('.js-switch').each( function(idx,dom) {\n\t\t\tconst $obj = $(dom);\n\t\t\tconst f    = toggle.call(self, $obj, true);\t// init=true\n\t\t\tif (f) \t// initalize success\n\t\t\t\t$obj.on(dom.tagName == 'INPUT' ? 'change' : 'click', func);\n\t\t} );\n\t});\n})();\n\n////////////////////////////////////////////////////////////////////////////////\n// accordion\n////////////////////////////////////////////////////////////////////////////////\n$$.dom_init(function($R){\n\tconst $accordion = $R.findx('.js-accordion');\n\tif (!$accordion.length) return;\n\t$accordion.adiaryAccordion();\n});\n\n////////////////////////////////////////////////////////////////////////////////\n// custom multiple select\n////////////////////////////////////////////////////////////////////////////////\n$$.dom_init( function($R){\n\t$R.findx('select.js-multiple').each(function(idx,dom){\n\t\tconst $sel = $(dom);\n\t\tif ($sel.prop('multiple')) return;\t// if select is multiple, do nothing.\n\t\t// multiple select box is height box style.\n\t\t// $sel copy to after with multiple attribute.\n\n\t\tconst $multi = $sel.clone(true).prop('multiple', true).removeClass('js-multiple').css('display', 'none');\n\t\t$sel.data('__multi', $multi);\n\n\t\t$sel.removeAttr('id');\n\t\t$sel.removeAttr('name');\n\t\t$multi.find('option.js-multiple-ignore').remove();\n\t\t$multi.insertAfter($sel);\n\n\t\tconst $opts = $multi.find('option');\n\t\t$opts.each(function(idx,dom){\n\t\t\tconst $opt = $(dom);\n\t\t\t$opt.prop('selected', $opt.data('selected'));\n\t\t});\n\n\t\tconst __change = function(evt){\n\t\t\tconst ary = [];\n\t\t\t$opts.each(function(idx,dom){\n\t\t\t\tconst $opt = $(dom);\n\t\t\t\tif ($opt.prop('selected')) ary.push($opt.html());\n\t\t\t});\n\t\t\tif (ary.length) {\n\t\t\t\tconst $add = $('<option>').addClass('js-multple-selected').html( ary[0] + (ary[1] ? '...' : '') );\n\t\t\t\t$sel.find('.js-multple-selected').remove();\n\t\t\t\t$sel.append( $add.prop('selected', true) );\n\t\t\t}\n\t\t};\n\t\t__change();\n\t\t$multi.on('change', __change);\n\t});\n});\n\n$$.init( function() {\n\tthis.$body.on('mousedown keydown', 'select.js-multiple', function(evt){\n\t\tconst $_obj  = $(evt.currentTarget);\n\t\tconst $multi = $_obj.data('__multi') || $_obj;\n\n\t\tconst lclass  = $multi.data('label-class');\n\t\tconst cdialog = $multi.data('custom-dialog');\n\t\tconst $dialog = cdialog ? $(cdialog) : $('<div>').data('title', $multi.data('title'));\n\t\tconst val2opt = {};\n\n\t\t$multi.find('option').each(function(idx,dom){\n\t\t\tconst $opt = $(dom);\n\t\t\tif ($opt.hasClass('js-multiple-ignore')) return;\n\n\t\t\tconst val  = $opt.val();\n\t\t\tval2opt[val] = $opt;\n\t\t\tif (cdialog) return;\n\n\t\t\tconst $label = $('<label>').html( $opt.html() );\n\t\t\tif (lclass !=='' && lclass !== undefined) $label.addClass(lclass)\n\n\t\t\t$label.prepend(\n\t\t\t\t$('<input>').attr({\n\t\t\t\t\ttype:\t'checkbox',\n\t\t\t\t\tvalue:\tval,\n\t\t\t\t})\n\t\t\t\t.prop('checked', $opt.prop('selected'))\n\t\t\t).addClass($opt.data('label-class'));\n\t\t\t$dialog.append( $label );\n\t\t});\n\n\t\tmsys.show_dialog($dialog, function(flag) {\n\t\t\tif (!flag) return;\n\n\t\t\tlet change;\n\n\t\t\t$dialog.find('input').each(function(idx,dom){\n\t\t\t\tconst $inp = $(dom);\n\t\t\t\tconst val  = $inp.val();\n\t\t\t\tconst $opt = val2opt[val];\n\t\t\t\tconst flag = $inp.prop('checked');\n\t\t\t\tif ($inp.hasClass('js-multiple-ignore') || !$opt) return;\n\n\t\t\t\tif (flag != $opt.prop('selected')) change=true;\n\t\t\t\t$opt.prop('selected', flag);\n\t\t\t});\n\t\t\tif (change) $multi.change();\n\t\t});\n\n\t\tevt.preventDefault();\n\t\treturn false;\n\t});\n});\n\n","//##############################################################################\n// subroutines\n//##############################################################################\n////////////////////////////////////////////////////////////////////////////////\n// load script\n////////////////////////////////////////////////////////////////////////////////\n(function(){\n\tconst inc = {};\n\n\t$$.load_script = function(url, callback) {\n\t\tconst x = inc[url];\n\t\tif (x) {\n\t\t\tif (!callback) return;\n\t\t\tif (x==1) return callback();\n\t\t\t// now loading\n\t\t\tx.on('load', func);\n\t\t\treturn;\n\t\t}\n\n\t\tconst $s = $(document.createElement('script'));\n\t\tinc[url] = $s;\n\t\t$s.attr('src',   url);\n\t\t$s.attr('async', 'async');\n\n\t\tif (callback) $s.on('load', function(evt){\n\t\t\tinc[url] = 1;\n\t\t\tcallback(evt);\n\t\t});\n\n\t\t// Do not work and \"sync\" download by jQuery\n\t\t// this.$head.append( $s );\n\n\t\tthis.$head[0].appendChild( $s[0] );\n\t}\n})();\n\n////////////////////////////////////////////////////////////////////////////////\n// escape html tag\n////////////////////////////////////////////////////////////////////////////////\n$$.tag_esc = function(text) {\n\treturn text\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;')\n\t\t.replace(/'/g, '&apos;')\n}\n$$.tag_esc_br = function(text) {\n\treturn this.tag_esc(text).replace(/\\n|\\\\n/g,'<br>');\n}\n$$.tag_esc_amp = function(text) {\n\treturn this.tag_esc( text.replace(/&/g,'&amp;') );\n}\n$$.tag_decode = function(text) {\n\treturn text\n\t\t.replace(/&apos;/g, \"'\")\n\t\t.replace(/&quot;/g, '\"')\n\t\t.replace(/&gt;/g, '>')\n\t\t.replace(/&lt;/g, '<')\n\t\t.replace(/&#92;/g, \"\\\\\")\t// for JSON data\n}\n$$.tag_decode_amp = function(text) {\n\treturn this.tag_decode(text).replace(/&amp;/g,'&');\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// insert to textarea\n////////////////////////////////////////////////////////////////////////////////\n$$.insert_to_textarea = function(ta, text) {\n\tvar start = ta.selectionStart;\t// current cursol\n\tta.value  = ta.value.substring(0, start) + text + ta.value.substring(start);\n\tstart += text.length;\n\tta.setSelectionRange(start, start);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Cookie\n////////////////////////////////////////////////////////////////////////////////\n$$.set_cookie = function(name, val) {\n\tdocument.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(val) + '; SameSite=Lax;';\n}\n$$.get_cookie = function(name) {\n\tconst ary = document.cookie.split(/; */);\n\tfor (var i=0; i<ary.length; i++) {\n\t\tvar x = ary[i].split('=', 2);\n\t\tvar k = decodeURIComponent( x[0] );\n\t\tif (name != k) continue;\n\t\treturn decodeURIComponent( x[1] );\n\t}\n\treturn;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// file size format\n////////////////////////////////////////////////////////////////////////////////\n$$.size_format = function(s) {\n\tfunction sprintf_3f(n){\n\t\tn = n.toString();\n\t\tconst idx = n.indexOf('.');\n\t\tconst len = (0<=idx && idx<3) ? 4 : 3;\n\t\treturn n.substr(0,len);\n\t}\n\n\tif (s > 104857600) {\t// 100MB\n\t\ts = Math.round(s/1048576);\n\t\ts = s.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,');\n\t\treturn s + ' MB';\n\t}\n\tif (s > 1023487) return sprintf_3f( s/1048576 ) + ' MB';\n\tif (s >     999) return sprintf_3f( s/1024    ) + ' KB';\n\treturn s + ' Byte';\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// to int, float\n////////////////////////////////////////////////////////////////////////////////\n$$.int = function(s) {\n\tconst x = parseInt(s);\n\treturn isNaN(x) ? 0 : x;\n}\n$$.float = function(s) {\n\tconst x = parseFloat(s);\n\treturn isNaN(x) ? 0 : x;\n}\n\n\n","////////////////////////////////////////////////////////////////////////////////\n// \"script-defer\" and \"css-defer\"\n////////////////////////////////////////////////////////////////////////////////\n$$.init(function(){\n\tconst self=this;\n\n\t// css-defer\n\t$('link.css-defer').attr('rel', 'stylesheet');\n\n\tfunction run_script(tag) {\n\t\tconst $scripts = $(tag);\n\t\t$scripts.each(function(idx, dom) {\n\t\t\tconst ma  = dom.outerHTML.match(/^(.*?)>/);\n\t\t\tconst scr = document.createElement('script');\n\t\t\tscr.innerHTML = (ma ? '// ' + ma[1] + \">\\n\" : '') + dom.innerHTML;\n\t\t\tdom.innerHTML = '';\n\t\t\tdom.appendChild(scr);\n\t\t});\n\t}\n\t// script-const, Run just time\n\trun_script('script-const, script[type=\"js-const\"]');\n\n\t// script-defer, Run after all js file's $() function\n\t$(function(){\n\t\trun_script('script-defer, script[type=\"js-defer\"]');\n\t});\n});\n","//##############################################################################\n// run init\n//##############################################################################\n$(function(){\n\t(function() {\n\t\tthis.$head = $('head');\n\t\tthis.$body = $('body');\n\n\t\tconst $vars = $secure('#asys-vars');\n\t\tif ($vars.length) {\n\t\t\tconst json = $vars.html().replace(/^[\\s\\S]*?{/, '{').replace(/}[\\s\\S]*?$/, '}');\n\t\t\tconst data = JSON.parse(json);\n\t\t\tconst ary  = ['name', 'Initialize', 'myself', 'myself2', 'Basepath'];\n\t\t\tfor(var i=0; i<ary.length; i++) {\n\t\t\t\tif (ary[i] in data)\n\t\t\t\t\tthis[ary[i]] = data[ary[i]];\n\t\t\t}\n\t\t\tthis.asys_vars = data;\n\t\t}\n\t\tthis.load_msg($secure('#asys-msgs'));\n\n\t\t// PrefixStorage\n\t\tthis.Storage = new PrefixStorage( this.myself || '/' );\n\n\t\t// global export\n\t\twindow[this.name] = this;\n\n\t\t// initalize\n\t\tif (this.Initialize !== false) this.init();\n\t}).call($$)\n});\n"],"mappings":"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"}